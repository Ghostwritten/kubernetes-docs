
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>手动 · Kubernetes Docs</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="宗勋 - zongxun">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-accordion/accordion.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-change_girls/girls.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-holi-theme.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-sidebar-style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tags/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../对象/" />
    
    
    <link rel="prev" href="kubernetes-minikube-deploy.html" />
    

    <link href="http://smoothies.com.cn/rss" title="Kubernetes Docs" rel="alternate" type="application/rss+xml" />

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"Ghostwritten","repo":"kubernetes-docs","type":"star","count":true,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://smoothies.com.cn/docker-docs/Overview.html" target="_blank" class="custom-link">Docker</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn" target="_blank" class="custom-link">Blog</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/kubernetes-docs/Overview.html" target="_blank" class="custom-link">Kubernetes</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/go-docs/Overview.html" target="_blank" class="custom-link">Go</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/prometheus-docs/Overview.html" target="_blank" class="custom-link">Prometheus</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/linux-command-docs/Overview.html" target="_blank" class="custom-link">Command</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/shell-docs/Overview.html" target="_blank" class="custom-link">Shell</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/linux-docs/Overview.html" target="_blank" class="custom-link">Linux</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/gitbook-docs/Overview.html" target="_blank" class="custom-link">Gitbook</a>
        </li>
    
        
        <li>
            <a href="https://smoothies.com.cn/python-docs/Overview.html" target="_blank" class="custom-link">Python</a>
        </li>
    
        
        <li>
            <a href="https://ghostwritten.gitbook.io/kubernetes-exam-in-action/" target="_blank" class="custom-link">Exam</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../Overview.html">
            
                <a href="../Overview.html">
            
                    
                    目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    序言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../工具/">
            
                <a href="../工具/">
            
                    
                    工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../概念/">
            
                <a href="../概念/">
            
                    
                    概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../升级/">
            
                <a href="../升级/">
            
                    
                    升级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../日志/">
            
                <a href="../日志/">
            
                    
                    日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../网络/">
            
                <a href="../网络/">
            
                    
                    网络
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../资源/">
            
                <a href="../资源/">
            
                    
                    资源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../资源/kubernetes-yum.html">
            
                <a href="../资源/kubernetes-yum.html">
            
                    
                    Yum
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    部署
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="kubernetes-minikube-deploy.html">
            
                <a href="kubernetes-minikube-deploy.html">
            
                    
                    minikube
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.2" data-path="kubernetes-manually-deploy.html">
            
                <a href="kubernetes-manually-deploy.html">
            
                    
                    手动
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../对象/">
            
                <a href="../对象/">
            
                    
                    对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../对象/Deployment/">
            
                <a href="../对象/Deployment/">
            
                    
                    Deployment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="../对象/Deployment/kubernetes-deployment-skill.html">
            
                <a href="../对象/Deployment/kubernetes-deployment-skill.html">
            
                    
                    技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="../对象/Deployment/kubernetes-client-go-deployment.html">
            
                <a href="../对象/Deployment/kubernetes-client-go-deployment.html">
            
                    
                    开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.3" data-path="../对象/Deployment/kubernetes-deployment-strategies.html">
            
                <a href="../对象/Deployment/kubernetes-deployment-strategies.html">
            
                    
                    策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.4" data-path="../对象/Deployment/kubernetes-deployment-principle.html">
            
                <a href="../对象/Deployment/kubernetes-deployment-principle.html">
            
                    
                    原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../对象/Kubernetes-DaemonSet.html">
            
                <a href="../对象/Kubernetes-DaemonSet.html">
            
                    
                    DaemonSet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../对象/kubernetes-PersistentVolume.html">
            
                <a href="../对象/kubernetes-PersistentVolume.html">
            
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../对象/Kubernetes-StatefulSet.html">
            
                <a href="../对象/Kubernetes-StatefulSet.html">
            
                    
                    StatefulSet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../对象/Kubernetes-Job.html">
            
                <a href="../对象/Kubernetes-Job.html">
            
                    
                    Job
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../对象/Runtimeclass/">
            
                <a href="../对象/Runtimeclass/">
            
                    
                    Runtimeclass
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.6.1" data-path="../对象/Runtimeclass/kubernetes-object-RuntimeClass-principle.html">
            
                <a href="../对象/Runtimeclass/kubernetes-object-RuntimeClass-principle.html">
            
                    
                    原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../对象/Kubernetes-PodSecurityPolicy.html">
            
                <a href="../对象/Kubernetes-PodSecurityPolicy.html">
            
                    
                    PodSecurityPolicy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../对象/Kubernetes-ConfigMaps.html">
            
                <a href="../对象/Kubernetes-ConfigMaps.html">
            
                    
                    ConfigMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../对象/Pod/">
            
                <a href="../对象/Pod/">
            
                    
                    Pod
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.9.1" data-path="../对象/Pod/Kubernetes-Pod-Probes.html">
            
                <a href="../对象/Pod/Kubernetes-Pod-Probes.html">
            
                    
                    Probes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9.2" data-path="../对象/Pod/Kubernetes-Pod-SecurityContext.html">
            
                <a href="../对象/Pod/Kubernetes-Pod-SecurityContext.html">
            
                    
                    SecurityContext
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="../对象/kubernetes-Secrets.html">
            
                <a href="../对象/kubernetes-Secrets.html">
            
                    
                    secret
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="../对象/Kubernetes-Ingress.html">
            
                <a href="../对象/Kubernetes-Ingress.html">
            
                    
                    Ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="../对象/Kubernetes-Service.html">
            
                <a href="../对象/Kubernetes-Service.html">
            
                    
                    Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="../对象/Kubernetes-NetworkPolicy.html">
            
                <a href="../对象/Kubernetes-NetworkPolicy.html">
            
                    
                    NetworkPolicy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="../对象/RBAC/">
            
                <a href="../对象/RBAC/">
            
                    
                    RBAC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.14.1" data-path="../对象/RBAC/kubernetes-RBAC-principle.html">
            
                <a href="../对象/RBAC/kubernetes-RBAC-principle.html">
            
                    
                    原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.15" data-path="../对象/Auditing/">
            
                <a href="../对象/Auditing/">
            
                    
                    Auditing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.15.1" data-path="../对象/Auditing/kubernetes-Auditing-practice.html">
            
                <a href="../对象/Auditing/kubernetes-Auditing-practice.html">
            
                    
                    实战
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../存储/">
            
                <a href="../存储/">
            
                    
                    存储
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../存储/kubernetes-storage-introduce-ClexVolume-and-CSI.html">
            
                <a href="../存储/kubernetes-storage-introduce-ClexVolume-and-CSI.html">
            
                    
                    FlexVolume CSI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../存储/kubernetes-storage-write-CSI.html">
            
                <a href="../存储/kubernetes-storage-write-CSI.html">
            
                    
                    编写 CSI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../存储/kuberentes-storage-volumes-principle.html">
            
                <a href="../存储/kuberentes-storage-volumes-principle.html">
            
                    
                    Volumes 原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../策略/">
            
                <a href="../策略/">
            
                    
                    策略
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../策略/OPA/">
            
                <a href="../策略/OPA/">
            
                    
                    OPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../策略/kubernetes-policy-ResourceQuota.html">
            
                <a href="../策略/kubernetes-policy-ResourceQuota.html">
            
                    
                    ResourceQuota
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../策略/kubernetes-policy-QoS.html">
            
                <a href="../策略/kubernetes-policy-QoS.html">
            
                    
                    QoS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../策略/kubernetes-policy-LimitRange.html">
            
                <a href="../策略/kubernetes-policy-LimitRange.html">
            
                    
                    LimitRange
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../组件/">
            
                <a href="../组件/">
            
                    
                    组件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../组件/Kubeadm/">
            
                <a href="../组件/Kubeadm/">
            
                    
                    Kubeadm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="../组件/Kubeadm/kubeadm-command.html">
            
                <a href="../组件/Kubeadm/kubeadm-command.html">
            
                    
                    命令
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../组件/Kubernetes-Kube-Proxy.html">
            
                <a href="../组件/Kubernetes-Kube-Proxy.html">
            
                    
                    Kube proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../组件/Kubectl/">
            
                <a href="../组件/Kubectl/">
            
                    
                    Kubectl
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.3.1" data-path="../组件/Kubectl/kubectl-command.html">
            
                <a href="../组件/Kubectl/kubectl-command.html">
            
                    
                    命令
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../组件/Kubelet/">
            
                <a href="../组件/Kubelet/">
            
                    
                    Kubelet
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.4.1" data-path="../组件/Kubelet/kubernetes-kubelet-configuration.html">
            
                <a href="../组件/Kubelet/kubernetes-kubelet-configuration.html">
            
                    
                    配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.2" data-path="../组件/Kubelet/kubernetes-kubelet-trash-recycling.html">
            
                <a href="../组件/Kubelet/kubernetes-kubelet-trash-recycling.html">
            
                    
                    垃圾回收
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../组件/kubernetes-kube-apiserver.html">
            
                <a href="../组件/kubernetes-kube-apiserver.html">
            
                    
                    kube apiserver
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../安全/">
            
                <a href="../安全/">
            
                    
                    安全
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../安全/Falco/">
            
                <a href="../安全/Falco/">
            
                    
                    Falco
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1.1" data-path="../安全/Falco/kubernetes-Security-falco-default-macros.html">
            
                <a href="../安全/Falco/kubernetes-Security-falco-default-macros.html">
            
                    
                    default macros
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.1.2" data-path="../安全/Falco/kubernetes-Security-falco-rules.html">
            
                <a href="../安全/Falco/kubernetes-Security-falco-rules.html">
            
                    
                    规则
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../安全/Apparmor/">
            
                <a href="../安全/Apparmor/">
            
                    
                    Apparmor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="../安全/Apparmor/kubernetes-Apparmor-rules.html">
            
                <a href="../安全/Apparmor/kubernetes-Apparmor-rules.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../安全/Trivy/">
            
                <a href="../安全/Trivy/">
            
                    
                    Trivy
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="../安全/Trivy/Kubernetes-Security-trivy-scan.html">
            
                <a href="../安全/Trivy/Kubernetes-Security-trivy-scan.html">
            
                    
                    扫描应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="../安全/Trivy/Kubernetes-Security-trivy-defined-Policy.html">
            
                <a href="../安全/Trivy/Kubernetes-Security-trivy-defined-Policy.html">
            
                    
                    自定义策略
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../tags.html">
            
                <a href="../tags.html">
            
                    
                    标签
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >手动</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#kubernetes-&#x624B;&#x52A8;&#x90E8;&#x7F72;"><b></b>kubernetes &#x624B;&#x52A8;&#x90E8;&#x7F72;</a></li><ul><li><span class="title-icon "></span><a href="#1-&#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;"><b></b>1. &#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;</a></li><li><span class="title-icon "></span><a href="#2-&#x8F6F;&#x4EF6;&#x7248;&#x672C;"><b></b>2. &#x8F6F;&#x4EF6;&#x7248;&#x672C;</a></li><li><span class="title-icon "></span><a href="#3-&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;"><b></b>3. &#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;</a></li><ul><li><span class="title-icon "></span><a href="#31-&#x914D;&#x7F6E;hostname"><b></b>3.1 &#x914D;&#x7F6E;hostname</a></li><li><span class="title-icon "></span><a href="#32-&#x914D;&#x7F6E;etchosts"><b></b>3.2 &#x914D;&#x7F6E;/etc/hosts</a></li><li><span class="title-icon "></span><a href="#33-&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap"><b></b>3.3 &#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap</a></li><li><span class="title-icon "></span><a href="#34--&#x52A0;&#x8F7D;brnetfilter"><b></b>3.4  &#x52A0;&#x8F7D;br_netfilter</a></li><li><span class="title-icon "></span><a href="#35-&#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;"><b></b>3.5 &#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;</a></li><li><span class="title-icon "></span><a href="#36-&#x914D;&#x7F6E;centos-yum&#x6E90;"><b></b>3.6 &#x914D;&#x7F6E;CentOS YUM&#x6E90;</a></li><li><span class="title-icon "></span><a href="#37-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;"><b></b>3.7 &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;</a></li><li><span class="title-icon "></span><a href="#38-&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;"><b></b>3.8 &#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#39-&#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;"><b></b>3.9 &#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;</a></li><li><span class="title-icon "></span><a href="#310-&#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;"><b></b>3.10 &#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;</a></li></ul><li><span class="title-icon "></span><a href="#4&#x90E8;&#x7F72;docker"><b></b>4.&#x90E8;&#x7F72;docker</a></li><ul><li><span class="title-icon "></span><a href="#41-remove&#x65E7;&#x7248;&#x672C;docker"><b></b>4.1 remove&#x65E7;&#x7248;&#x672C;docker</a></li><li><span class="title-icon "></span><a href="#42-&#x8BBE;&#x7F6E;docker-yum&#x6E90;"><b></b>4.2 &#x8BBE;&#x7F6E;docker yum&#x6E90;</a></li><li><span class="title-icon "></span><a href="#43-&#x5217;&#x51FA;docker&#x7248;&#x672C;"><b></b>4.3 &#x5217;&#x51FA;docker&#x7248;&#x672C;</a></li><li><span class="title-icon "></span><a href="#44-&#x5B89;&#x88C5;docker-&#x6307;&#x5B9A;18061"><b></b>4.4 &#x5B89;&#x88C5;docker &#x6307;&#x5B9A;18.06.1</a></li><li><span class="title-icon "></span><a href="#45-&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;"><b></b>4.5 &#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;</a></li><li><span class="title-icon "></span><a href="#46-&#x542F;&#x52A8;docker"><b></b>4.6 &#x542F;&#x52A8;docker</a></li></ul><li><span class="title-icon "></span><a href="#5-&#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl"><b></b>5 &#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl</a></li><ul><li><span class="title-icon "></span><a href="#51-yum-&#x5B89;&#x88C5;-&#x5E76;&#x542F;&#x52A8;"><b></b>5.1 yum &#x5B89;&#x88C5; &#x5E76;&#x542F;&#x52A8;</a></li></ul><li><span class="title-icon "></span><a href="#6-&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;"><b></b>6 &#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;</a></li><ul><li><span class="title-icon "></span><a href="#61-&#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><b></b>6.1 &#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;</a></li><li><span class="title-icon "></span><a href="#62-&#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadmconf&#x6587;&#x4EF6;"><b></b>6.2 &#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadm.conf&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#63-&#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;"><b></b>6.3 &#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;</a></li><li><span class="title-icon "></span><a href="#64-&#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;kubernetes&#x7248;&#x672C;"><b></b>6.4 &#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;Kubernetes&#x7248;&#x672C;</a></li><li><span class="title-icon "></span><a href="#65-&#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;"><b></b>6.5 &#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#66-docker-tag-&#x955C;&#x50CF;"><b></b>6.6 docker tag &#x955C;&#x50CF;</a></li></ul><li><span class="title-icon "></span><a href="#67-&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><b></b>6.7 &#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;</a></li><li><span class="title-icon "></span><a href="#7-&#x90E8;&#x7F72;master&#x8282;&#x70B9;"><b></b>7 &#x90E8;&#x7F72;master&#x8282;&#x70B9;</a></li><ul><li><span class="title-icon "></span><a href="#71--kubeadm-init-&#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;"><b></b>7.1  kubeadm init &#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;</a></li><li><span class="title-icon "></span><a href="#72--&#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;"><b></b>7.2  &#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;</a></li></ul><li><span class="title-icon "></span><a href="#8-&#x90E8;&#x7F72;calico&#x7F51;&#x7EDC;-&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><b></b>8 &#x90E8;&#x7F72;calico&#x7F51;&#x7EDC; &#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;</a></li><ul><li><span class="title-icon "></span><a href="#81calico&#x5B98;&#x65B9;&#x955C;&#x50CF;-&#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;"><b></b>8.1calico&#x5B98;&#x65B9;&#x955C;&#x50CF; &#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;</a></li><li><span class="title-icon "></span><a href="#82-&#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kddyaml&#x6587;&#x4EF6;"><b></b>8.2 &#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kdd.yaml&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#83-&#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calicoyaml&#x6587;&#x4EF6;"><b></b>8.3 &#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calico.yaml&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#84-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><b></b>8.4 &#x4FEE;&#x6539;&#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#85-&#x90E8;&#x7F72;calicoyaml&#x6587;&#x4EF6;"><b></b>8.5 &#x90E8;&#x7F72;calico.yaml&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#86-&#x67E5;&#x770B;&#x72B6;&#x6001;"><b></b>8.6 &#x67E5;&#x770B;&#x72B6;&#x6001;</a></li></ul><li><span class="title-icon "></span><a href="#9-&#x90E8;&#x7F72;node&#x8282;&#x70B9;"><b></b>9 &#x90E8;&#x7F72;node&#x8282;&#x70B9;</a></li><ul><li><span class="title-icon "></span><a href="#91-&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;"><b></b>9.1 &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;</a></li><li><span class="title-icon "></span><a href="#92--&#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC;-&#xFF08;kubeadm-init-&#x751F;&#x6210;&#xFF09;"><b></b>9.2  &#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC; &#xFF08;kubeadm init &#x751F;&#x6210;&#xFF09;</a></li></ul><li><span class="title-icon "></span><a href="#10-&#x90E8;&#x7F72;dashboard"><b></b>10 &#x90E8;&#x7F72;dashboard</a></li><ul><li><span class="title-icon "></span><a href="#101-&#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;"><b></b>10.1 &#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;</a></li><li><span class="title-icon "></span><a href="#102-&#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;"><b></b>10.2 &#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;</a></li><li><span class="title-icon "></span><a href="#10-3-&#x4E0B;&#x8F7D;-kubernetes-dashboardyaml-&#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><b></b>10. 3 &#x4E0B;&#x8F7D; kubernetes-dashboard.yaml &#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;</a></li><li><span class="title-icon "></span><a href="#104-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><b></b>10.4 &#x4FEE;&#x6539;&#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#105-&#x521B;&#x5EFA;dashboard&#x7684;pod"><b></b>10.5 &#x521B;&#x5EFA;dashboard&#x7684;pod</a></li><li><span class="title-icon "></span><a href="#106-&#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;"><b></b>10.6 &#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;</a></li><li><span class="title-icon "></span><a href="#107-dashboard-bug&#x5904;&#x7406;"><b></b>10.7 Dashboard BUG&#x5904;&#x7406;</a></li></ul></ul></ul></div><a href="#kubernetes-&#x624B;&#x52A8;&#x90E8;&#x7F72;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="kubernetes-&#x624B;&#x52A8;&#x90E8;&#x7F72;"><a name="kubernetes-&#x624B;&#x52A8;&#x90E8;&#x7F72;" class="anchor-navigation-ex-anchor" href="#kubernetes-&#x624B;&#x52A8;&#x90E8;&#x7F72;"><i class="fa fa-link" aria-hidden="true"></i></a>kubernetes &#x624B;&#x52A8;&#x90E8;&#x7F72;</h1><!-- tags --><div id="tags" class="tags"><p><i class="fa fa-tags" aria-hidden="true"></i> <a href="../tags.html#&#x90E8;&#x7F72;">&#x90E8;&#x7F72;</a></p></div><!-- tagsstop --><!-- catalog: ~手动~ -->
<p>Kubernetes &#x7248;&#x672C;&#x67E5;&#x9605;&#x5730;&#x5740;&#xFF1A; <a href="https://github.com/kubernetes/kubernetes/releases" target="_blank">https://github.com/kubernetes/kubernetes/releases</a></p>
<h2 id="1-&#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;"><a name="1-&#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;" class="anchor-navigation-ex-anchor" href="#1-&#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x5B9E;&#x8DF5;&#x73AF;&#x5883;&#x51C6;&#x5907;</h2>
<ul>
<li>&#x670D;&#x52A1;&#x5668;&#x865A;&#x62DF;&#x673A;&#x51C6;&#x5907;
IP&#x5730;&#x5740; &#x8282;&#x70B9;&#x89D2;&#x8272; CPU Memory Hostname</li>
<li>192.168.211.11 master and  etcd &gt;=2c &gt;=2G master</li>
<li>192.168.211.12 worker &gt;=2c &gt;=2G node</li>
</ul>
<p>&#x672C;&#x5B9E;&#x9A8C;&#x6211;&#x8FD9;&#x91CC;&#x7528;&#x7684;VM&#x662F;vmware workstation&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x6BCF;&#x4E2A;&#x7ED9;&#x4E86;2C 2G 20GB&#x914D;&#x7F6E;&#xFF0C;&#x5927;&#x5BB6;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x8D44; &#x6E90;&#x60C5;&#x51B5;&#xFF0C;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7ED9;&#x7684;&#x5EFA;&#x8BAE;&#x6700;&#x4F4E;&#x503C;&#x521B;&#x5EFA;&#x5373;&#x53EF;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;<strong>hostname&#x4E0D;&#x80FD;&#x6709;&#x5927;&#x5199;&#x5B57;&#x6BCD;</strong>&#xFF0C;&#x6BD4;&#x5982;Master&#x8FD9;&#x6837;&#x3002;</p>
<h2 id="2-&#x8F6F;&#x4EF6;&#x7248;&#x672C;"><a name="2-&#x8F6F;&#x4EF6;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#2-&#x8F6F;&#x4EF6;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>2. &#x8F6F;&#x4EF6;&#x7248;&#x672C;</h2>
<ul>
<li>&#x7CFB;&#x7EDF;&#x7C7B;&#x578B;&#xFF1A;centos 7.4 1708</li>
<li>&#x5185;&#x6838;&#x7248;&#x672C;: Linux 3.10.0-957.1.3.el7.x86_64</li>
<li>Kubernetes&#x7248; &#x672C;&#xFF1A;v1.18.1</li>
<li>docker&#x7248;&#x672C;&#xFF1A;19.03.5</li>
<li>kubeadm&#x7248;&#x672C;&#xFF1A;v1.18.1</li>
<li>kubectl&#x7248;&#x672C;&#xFF1A;Client Version v1.18.1  Server Versionv1.18.0</li>
<li>kubelet&#x7248;&#x672C;&#xFF1A;v1.18.1</li>
</ul>
<h2 id="3-&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;"><a name="3-&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#3-&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;</h2>
<h3 id="31-&#x914D;&#x7F6E;hostname"><a name="31-&#x914D;&#x7F6E;hostname" class="anchor-navigation-ex-anchor" href="#31-&#x914D;&#x7F6E;hostname"><i class="fa fa-link" aria-hidden="true"></i></a>3.1 &#x914D;&#x7F6E;hostname</h3>
<pre class="language-"><code class="lang-bash">hostnamectl set-hostname master 
hostnamectl set-hostname <span class="token function">node</span>
</code></pre>
<h3 id="32-&#x914D;&#x7F6E;etchosts"><a name="32-&#x914D;&#x7F6E;etchosts" class="anchor-navigation-ex-anchor" href="#32-&#x914D;&#x7F6E;etchosts"><i class="fa fa-link" aria-hidden="true"></i></a>3.2 &#x914D;&#x7F6E;/etc/hosts</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/hosts </span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 
::1        localhost localhost.localdomain localhost6 localhost6.localdomain6 
192.168.211.11 master 
192.168.211.12 node 
EOF</span>
</code></pre>
<h3 id="33-&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap"><a name="33-&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap" class="anchor-navigation-ex-anchor" href="#33-&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap"><i class="fa fa-link" aria-hidden="true"></i></a>3.3 &#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3001;selinux&#x3001;swap</h3>
<pre class="language-"><code class="lang-bash">setenforce  <span class="token number">0</span>
<span class="token function">sed</span> -i <span class="token string">&quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/sysconfig/selinux
<span class="token function">sed</span> -i <span class="token string">&quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/selinux/config
<span class="token function">sed</span> -i <span class="token string">&quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot;</span> /etc/sysconfig/selinux
<span class="token function">sed</span> -i <span class="token string">&quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot;</span> /etc/selinux/config

systmectl stop firewalld
systmectl disable firewalld

swapoff -a
<span class="token function">sed</span> -i <span class="token string">&apos;s/.*swap.*/#&amp;/&apos;</span> /etc/fstab
</code></pre>
<h3 id="34--&#x52A0;&#x8F7D;brnetfilter"><a name="34--&#x52A0;&#x8F7D;brnetfilter" class="anchor-navigation-ex-anchor" href="#34--&#x52A0;&#x8F7D;brnetfilter"><i class="fa fa-link" aria-hidden="true"></i></a>3.4  &#x52A0;&#x8F7D;br_netfilter</h3>
<p>&#x5E73;&#x53F0;CLI&#x68C0;&#x67E5;br_netfilter&#x6A21;&#x5757;&#x662F;&#x5426;&#x5DF2;&#x52A0;&#x8F7D;&#xFF0C;&#x5982;&#x679C;&#x6A21;&#x5757;&#x4E0D;&#x53EF;&#x7528;&#x5219;&#x9000;&#x51FA;&#x3002;&#x9700;&#x8981;&#x6B64;&#x6A21;&#x5757;&#x4EE5;&#x542F;&#x7528;&#x900F;&#x660E;&#x4F2A;&#x88C5;&#x5E76;&#x4FC3;&#x8FDB;&#x865A;&#x62DF;&#x53EF;&#x6269;&#x5C55;LAN&#xFF08;VxLAN&#xFF09;&#x6D41;&#x91CF;&#xFF0C;&#x4EE5;&#x5728;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;Kubernetes Pod&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5DF2;&#x52A0;&#x8F7D;&#xFF0C;&#x8BF7;&#x8FD0;&#x884C;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">$ <span class="token function">sudo</span> lsmod<span class="token operator">|</span><span class="token function">grep</span> br_netfilter
br_netfilter <span class="token number">24576</span> <span class="token number">0</span> 
&#x6865;155648 <span class="token number">2</span> br_netfilter&#xFF0C;ebtable_broute
</code></pre>
<p>&#x5982;&#x679C;&#x770B;&#x5230;&#x7C7B;&#x4F3C;&#x4E8E;&#x6240;&#x793A;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5219; br_netfilter&#x6A21;&#x5757;&#x5DF2;&#x52A0;&#x8F7D;&#x3002;&#x5185;&#x6838;&#x6A21;&#x5757;&#x901A;&#x5E38;&#x5728;&#x9700;&#x8981;&#x65F6;&#x52A0;&#x8F7D;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x592A;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x624B;&#x52A8;&#x52A0;&#x8F7D;&#x6B64;&#x6A21;&#x5757;&#x3002;&#x5982;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x5E76;&#x901A;&#x8FC7;&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x4E3A;&#x6C38;&#x4E45;&#x6A21;&#x5757;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token function">sudo</span> modprobe br_netfilter
<span class="token function">sudo</span> <span class="token function">sh</span> -c <span class="token string">&apos;echo &quot;br_netfilter&quot; &gt; /etc/modules-load.d/br_netfilter.conf&apos;</span>
</code></pre>
<p>&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;<strong>&#x5F00;&#x542F;&#x5185;&#x6838;ipv4&#x8F6C;&#x53D1;&#x9700;&#x8981;&#x52A0;&#x8F7D;br_netfilter&#x6A21;&#x5757;</strong></p>
<h3 id="35-&#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;"><a name="35-&#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#35-&#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>3.5 &#x914D;&#x7F6E;&#x5185;&#x6838;&#x53C2;&#x6570;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/sysctl.d/k8s.conf <span class="token operator">&lt;&lt;</span><span class="token string">EOF 
net.bridge.bridge-nf-call-ip6tables = 1 
net.bridge.bridge-nf-call-iptables = 1 
EOF</span>
sysctl -p /etc/sysctl.d/k8s.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* soft nofile 655360&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* hard nofile 655360&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* soft nproc 655360&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* hard nproc 655360&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* soft  memlock  unlimited&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;* hard memlock  unlimited&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;DefaultLimitNOFILE=1024000&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/systemd/system.conf
<span class="token builtin class-name">echo</span> <span class="token string">&quot;DefaultLimitNPROC=1024000&quot;</span>  <span class="token operator">&gt;&gt;</span> /etc/systemd/system.conf
</code></pre>
<p>&#x6267;&#x884C;&#x770B;&#x4E0B;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;&#x662F;&#x5426;&#x662F;<code>655360</code> &#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;<strong>&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x7EC8;&#x7AEF;</strong>&#x3002;</p>
<pre class="language-"><code class="lang-bash"> <span class="token builtin class-name">ulimit</span> -Hn
</code></pre>
<h3 id="36-&#x914D;&#x7F6E;centos-yum&#x6E90;"><a name="36-&#x914D;&#x7F6E;centos-yum&#x6E90;" class="anchor-navigation-ex-anchor" href="#36-&#x914D;&#x7F6E;centos-yum&#x6E90;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6 &#x914D;&#x7F6E;CentOS YUM&#x6E90;</h3>
<p>&#x914D;&#x7F6E;&#x56FD;&#x5185;tencent yum&#x6E90;&#x5730;&#x5740;&#x3001;epel&#x6E90;&#x5730;&#x5740;&#x3001;&#x56FD;&#x5185;Kubernetes&#x6E90;&#x5730;&#x5740; </p>
<pre class="language-"><code class="lang-bash">yum <span class="token function">install</span> -y <span class="token function">wget</span>
<span class="token function">rm</span> -rf  /etc/yum.repos.d/*
<span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.cloud.tencent.com/repo/centos7_base.repo
<span class="token function">wget</span> -O /etc/yum.repos.d/epel.repo http://mirrors.cloud.tencent.com/repo/epel-7.repo
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/yum.repos.d/kubernetes.repo</span>
[kubernetes]
name=Kubernetes
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg  
EOF</span>
yum clean all <span class="token operator">&amp;&amp;</span> yum makecache
</code></pre>
<h3 id="37-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;"><a name="37-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;" class="anchor-navigation-ex-anchor" href="#37-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;"><i class="fa fa-link" aria-hidden="true"></i></a>3.7 &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5305;</h3>
<pre class="language-"><code class="lang-bash">yum <span class="token function">install</span>  -y conntrack ipvsadm ipset jq sysstat <span class="token function">curl</span> iptables libseccomp bash-completion yum-utils device-mapper-persistent-data lvm2 net-tools conntrack-tools <span class="token function">vim</span> libtool-ltdl
</code></pre>
<h3 id="38-&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;"><a name="38-&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#38-&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>3.8 &#x65F6;&#x95F4;&#x540C;&#x6B65;&#x914D;&#x7F6E;</h3>
<p>Kubernetes&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#xFF0C;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x7CFB;&#x7EDF;&#x65F6;&#x95F4;&#x9700;&#x8981;&#x540C;&#x6B65;&#x5BF9;&#x5E94;&#x4E0A;&#x3002; </p>
<pre class="language-"><code class="lang-bash">yum -y <span class="token function">install</span> chrony
systemctl <span class="token builtin class-name">enable</span> chronyd.service <span class="token operator">&amp;&amp;</span> systemctl start chronyd.service <span class="token operator">&amp;&amp;</span> systemctl status chronyd.service
chronyc sources
</code></pre>
<p>&#x8FD0;&#x884C;date&#x547D;&#x4EE4;&#x770B;&#x4E0B;&#x7CFB;&#x7EDF;&#x65F6;&#x95F4;&#xFF0C;&#x8FC7;&#x4E00;&#x4F1A;&#x513F;&#x65F6;&#x95F4;&#x5C31;&#x4F1A;&#x540C;&#x6B65;</p>
<ul>
<li>[ ] &#x65F6;&#x95F4;&#x5982;&#x679C;&#x4E0D;&#x540C;&#x6B65;&#x4F1A;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#xFF1F;</li>
</ul>
<h3 id="39-&#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;"><a name="39-&#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;" class="anchor-navigation-ex-anchor" href="#39-&#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;"><i class="fa fa-link" aria-hidden="true"></i></a>3.9 &#x914D;&#x7F6E;&#x8282;&#x70B9;&#x95F4;ssh&#x4E92;&#x4FE1;</h3>
<p>&#x914D;&#x7F6E;ssh&#x4E92;&#x4FE1;&#xFF0C;&#x90A3;&#x4E48;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x5C31;&#x80FD;&#x65E0;&#x5BC6;&#x8BBF;&#x95EE;&#xFF0C;&#x65B9;&#x4FBF;&#x65E5;&#x540E;&#x6267;&#x884C;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72; </p>
<pre class="language-"><code class="lang-bash">ssh-keygen     <span class="token comment"># &#x6BCF;&#x53F0;&#x673A;&#x5668;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C; &#x4E00;&#x8DEF;&#x56DE;&#x8F66;&#x5373;&#x53EF; </span>
ssh-copy-id  <span class="token function">node</span>      <span class="token comment"># &#x5230;master&#x4E0A;&#x62F7;&#x8D1D;&#x516C;&#x94A5;&#x5230;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8F93;&#x5165; yes&#x548C;&#x5BC6;&#x7801;</span>
</code></pre>
<ul>
<li>[ ] &#x5982;&#x679C;&#x53EA;&#x662F;master&#x4E0E;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x505A;&#x4E86;&#x4E92;&#x4FE1;&#xFF0C;&#x4F1A;&#x6709;&#x5F71;&#x54CD;&#x5417;&#xFF1F;</li>
</ul>
<h3 id="310-&#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;"><a name="310-&#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;" class="anchor-navigation-ex-anchor" href="#310-&#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;"><i class="fa fa-link" aria-hidden="true"></i></a>3.10 &#x521D;&#x59CB;&#x5316;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x68C0;&#x67E5;</h3>
<ul>
<li>&#x91CD;&#x542F;&#xFF0C;&#x505A;&#x5B8C;&#x4EE5;&#x4E0A;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x6700;&#x597D;reboot&#x91CD;&#x542F;&#x4E00;&#x904D; </li>
<li>ping &#x6BCF;&#x4E2A;&#x8282;&#x70B9;hostname &#x770B;&#x662F;&#x5426;&#x80FD;ping&#x901A; </li>
<li>ssh &#x5BF9;&#x65B9;hostname&#x770B;&#x4E92;&#x4FE1;&#x662F;&#x5426;&#x65E0;&#x5BC6;&#x7801;&#x8BBF;&#x95EE;&#x6210;&#x529F; </li>
<li>&#x6267;&#x884C;date&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x6B63;&#x786E; </li>
<li>&#x6267;&#x884C; ulimit -Hn &#x770B;&#x4E0B;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;&#x662F;&#x5426;&#x662F;655360 </li>
<li>cat /etc/sysconfig/selinux |grep disabled &#x67E5;&#x770B;&#x4E0B;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;selinux&#x662F;&#x5426;&#x90FD;&#x662F;disabled&#x72B6;&#x6001;</li>
</ul>
<h2 id="4&#x90E8;&#x7F72;docker"><a name="4&#x90E8;&#x7F72;docker" class="anchor-navigation-ex-anchor" href="#4&#x90E8;&#x7F72;docker"><i class="fa fa-link" aria-hidden="true"></i></a>4.&#x90E8;&#x7F72;docker</h2>
<h3 id="41-remove&#x65E7;&#x7248;&#x672C;docker"><a name="41-remove&#x65E7;&#x7248;&#x672C;docker" class="anchor-navigation-ex-anchor" href="#41-remove&#x65E7;&#x7248;&#x672C;docker"><i class="fa fa-link" aria-hidden="true"></i></a>4.1 remove&#x65E7;&#x7248;&#x672C;docker</h3>
<pre class="language-"><code class="lang-bash">yum remove -y <span class="token function">docker</span> docker-ce docker-common docker-selinux docker-engine
</code></pre>
<h3 id="42-&#x8BBE;&#x7F6E;docker-yum&#x6E90;"><a name="42-&#x8BBE;&#x7F6E;docker-yum&#x6E90;" class="anchor-navigation-ex-anchor" href="#42-&#x8BBE;&#x7F6E;docker-yum&#x6E90;"><i class="fa fa-link" aria-hidden="true"></i></a>4.2 &#x8BBE;&#x7F6E;docker yum&#x6E90;</h3>
<pre class="language-"><code class="lang-bash">yum-config-manager  --add-repo https://download.docker.com/linux/centos/dockerce.repo
</code></pre>
<h3 id="43-&#x5217;&#x51FA;docker&#x7248;&#x672C;"><a name="43-&#x5217;&#x51FA;docker&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#43-&#x5217;&#x51FA;docker&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>4.3 &#x5217;&#x51FA;docker&#x7248;&#x672C;</h3>
<pre class="language-"><code class="lang-bash">yum list docker-ce --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r
</code></pre>
<h3 id="44-&#x5B89;&#x88C5;docker-&#x6307;&#x5B9A;18061"><a name="44-&#x5B89;&#x88C5;docker-&#x6307;&#x5B9A;18061" class="anchor-navigation-ex-anchor" href="#44-&#x5B89;&#x88C5;docker-&#x6307;&#x5B9A;18061"><i class="fa fa-link" aria-hidden="true"></i></a>4.4 &#x5B89;&#x88C5;docker &#x6307;&#x5B9A;18.06.1</h3>
<pre class="language-"><code class="lang-bash">yum <span class="token function">install</span> -y docker-ce-19.03.5-3.el7.x86_64
</code></pre>
<h3 id="45-&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;"><a name="45-&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;" class="anchor-navigation-ex-anchor" href="#45-&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5 &#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x548C;docker&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&apos;EOF&apos;
{  
  &quot;registry-mirrors&quot;: [&quot;https://q2hy3fzi.mirror.aliyuncs.com&quot;], 
  &quot;graph&quot;: &quot;/tol/docker-data&quot; 
} 
EOF</span>
</code></pre>
<h3 id="46-&#x542F;&#x52A8;docker"><a name="46-&#x542F;&#x52A8;docker" class="anchor-navigation-ex-anchor" href="#46-&#x542F;&#x52A8;docker"><i class="fa fa-link" aria-hidden="true"></i></a>4.6 &#x542F;&#x52A8;docker</h3>
<pre class="language-"><code class="lang-bash">systemctl daemon-reload <span class="token operator">&amp;&amp;</span> systemctl restart <span class="token function">docker</span> <span class="token operator">&amp;&amp;</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span> <span class="token operator">&amp;&amp;</span> systemctl status <span class="token function">docker</span>
</code></pre>
<h2 id="5-&#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl"><a name="5-&#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl" class="anchor-navigation-ex-anchor" href="#5-&#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl"><i class="fa fa-link" aria-hidden="true"></i></a>5 &#x5B89;&#x88C5;kubeadm&#x3001;kubelet&#x3001;kubectl</h2>
<p>&#x8FD9;&#x4E00;&#x6B65;&#x662F;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x5F97;&#x5B89;&#x88C5;&#xFF08;&#x5305;&#x62EC;node&#x8282;&#x70B9;&#xFF09;
&#x5DE5;&#x5177;&#x8BF4;&#x660E; </p>
<ul>
<li>kubeadm: &#x90E8;&#x7F72;&#x96C6;&#x7FA4;&#x7528;&#x7684;&#x547D;&#x4EE4;</li>
<li>kubelet: &#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x90FD;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x8D1F;&#x8D23;&#x7BA1;&#x7406;pod&#x3001;&#x5BB9;&#x5668;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</li>
<li><p>kubectl: &#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x5DE5;&#x5177;</p>
<h3 id="51-yum-&#x5B89;&#x88C5;-&#x5E76;&#x542F;&#x52A8;"><a name="51-yum-&#x5B89;&#x88C5;-&#x5E76;&#x542F;&#x52A8;" class="anchor-navigation-ex-anchor" href="#51-yum-&#x5B89;&#x88C5;-&#x5E76;&#x542F;&#x52A8;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1 yum &#x5B89;&#x88C5; &#x5E76;&#x542F;&#x52A8;</h3>
</li>
</ul>
<pre class="language-"><code class="lang-bash">yum <span class="token function">install</span> -y kubelet kubeadm kubectl --disableexcludes<span class="token operator">=</span>kubernetes
systemctl <span class="token builtin class-name">enable</span> kubelet <span class="token operator">&amp;&amp;</span> systemctl start kubelet
</code></pre>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;kubelet &#x670D;&#x52A1;&#x4F1A;&#x6682;&#x65F6;&#x542F;&#x52A8;&#x4E0D;&#x4E86;&#xFF0C;&#x5148;&#x4E0D;&#x7528;&#x7BA1;&#x5B83;&#x3002;</strong></p>
<h2 id="6-&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;"><a name="6-&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;" class="anchor-navigation-ex-anchor" href="#6-&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;"><i class="fa fa-link" aria-hidden="true"></i></a>6 &#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x51C6;&#x5907;</h2>
<h3 id="61-&#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><a name="61-&#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;" class="anchor-navigation-ex-anchor" href="#61-&#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>6.1 &#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;</h3>
<p> &#x4F7F;&#x7528;kubeadm&#x6765;&#x642D;&#x5EFA;Kubernetes&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5F97;&#x5230;Kubernetes&#x8FD0;&#x884C;&#x7684;&#x5BF9;&#x5E94;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x6BD4;&#x5982;<code>&#xFF1A;kubeproxy&#x3001;kube-apiserver&#x3001;kube-controller-manager</code>&#x7B49;&#x7B49; &#x3002;&#x90A3;&#x4E48;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5F97;&#x77E5;&#x8981;&#x4E0B;&#x8F7D;&#x54EA;&#x4E9B;&#x955C;&#x50CF; &#x5462;&#xFF1F;&#x4ECE;<code>kubeadm v1.11+</code>&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;<code>kubeadm config print-default</code> &#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x65B9;&#x4FBF; &#x7684;&#x5C06;kubeadm&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x8F93;&#x51FA;&#x5230;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x91CC;&#x5C31;&#x5305;&#x542B;&#x4E86;&#x642D;&#x5EFA;K8S&#x5BF9;&#x5E94;&#x7248;&#x672C;&#x9700;&#x8981;&#x7684;&#x57FA;&#x7840;&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x3002;&#x53E6; &#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6267;&#x884C; <code>kubeadm config images list</code> &#x547D;&#x4EE4;&#x67E5;&#x770B;&#x4F9D;&#x8D56;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;&#x3002;</p>
<pre class="language-"><code class="lang-bash">$  kubeadm config images list
W0417 00:57:50.788202  <span class="token number">129664</span> configset.go:202<span class="token punctuation">]</span> WARNING: kubeadm cannot validate component configs <span class="token keyword">for</span> API <span class="token function">groups</span> <span class="token punctuation">[</span>kubelet.config.k8s.io kubeproxy.config.k8s.io<span class="token punctuation">]</span>
k8s.gcr.io/kube-apiserver:v1.18.1
k8s.gcr.io/kube-controller-manager:v1.18.1
k8s.gcr.io/kube-scheduler:v1.18.1
k8s.gcr.io/kube-proxy:v1.18.1
k8s.gcr.io/pause:3.2
k8s.gcr.io/etcd:3.4.3-0
k8s.gcr.io/coredns:1.6.7
</code></pre>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x663E;&#x793A;&#x7684;tag&#x540D;&#x5B57;&#x548C;&#x955C;&#x50CF;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x4ECE;<code>Kubernetes v1.12+</code>&#x5F00;&#x59CB;&#xFF0C;&#x955C;&#x50CF;&#x540D;&#x540E;&#x9762;&#x4E0D;&#x5E26; <code>amd64, arm, arm64, ppc64le</code> &#x8FD9;&#x6837;&#x7684;&#x6807;&#x8BC6;&#x4E86;</p>
<h3 id="62-&#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadmconf&#x6587;&#x4EF6;"><a name="62-&#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadmconf&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#62-&#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadmconf&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2 &#x751F;&#x6210;&#x9ED8;&#x8BA4;kubeadm.conf&#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-bash">$ kubeadm config print init-defaults <span class="token operator">&gt;</span> kubeadm.conf
</code></pre>
<h3 id="63-&#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;"><a name="63-&#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#63-&#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>6.3 &#x7ED5;&#x8FC7;&#x5899;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x65B9;&#x6CD5;</h3>
<p>&#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x4F1A;&#x4ECE;google&#x7684;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x5730;&#x5740;k8s.gcr.io&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A; &#x4E0B;&#x8F7D;&#x4E0D;&#x6765;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x628A;&#x5730;&#x5740;&#x6539;&#x6210;&#x56FD;&#x5185;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x963F;&#x91CC;&#x7684;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token function">sed</span> -i <span class="token string">&quot;s/imageRepository: .*/imageRepository: registry.aliyuncs.com\/google_containers/g&quot;</span> kubeadm.conf
</code></pre>
<h3 id="64-&#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;kubernetes&#x7248;&#x672C;"><a name="64-&#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;kubernetes&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#64-&#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;kubernetes&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>6.4 &#x6307;&#x5B9A;kubeadm&#x5B89;&#x88C5;&#x7684;Kubernetes&#x7248;&#x672C;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">sed</span> -i <span class="token string">&quot;s/kubernetesVersion: .*/kubernetesVersion: v1.18.1/g&quot;</span> kubeadm.conf
</code></pre>
<h3 id="65-&#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;"><a name="65-&#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#65-&#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>6.5 &#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;</h3>
<p>kubeadm.conf&#x4FEE;&#x6539;&#x597D;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x4ECE;&#x56FD;&#x5185;&#x4E0B;&#x8F7D;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;&#x4E86;&#xFF1A; </p>
<pre class="language-"><code class="lang-bash">$ kubeadm config images pull --config kubeadm.conf
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.18.1
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.18.1
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.18.1
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.18.1
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/pause:3.2
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/etcd:3.4.3-0
<span class="token punctuation">[</span>config/images<span class="token punctuation">]</span> Pulled registry.aliyuncs.com/google_containers/coredns:1.6.7
</code></pre>
<p>&#x81EA;&#x52A8;&#x4E0B;&#x8F7D;v1.81&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x6267;&#x884C; docker images &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0B;&#x8F7D;&#x597D;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;</p>
<pre class="language-"><code class="lang-bash">$ <span class="token function">docker</span> images 
registry.aliyuncs.com/google_containers/kube-proxy                v1.18.1             4e68534e24f6        <span class="token number">8</span> days ago          117MB
registry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.1             d1ccdd18e6ed        <span class="token number">8</span> days ago          162MB
registry.aliyuncs.com/google_containers/kube-apiserver            v1.18.1             a595af0107f9        <span class="token number">8</span> days ago          173MB
registry.aliyuncs.com/google_containers/pause                     <span class="token number">3.2</span>                 80d28bedfe5d        <span class="token number">2</span> months ago        683kB
registry.aliyuncs.com/google_containers/etcd                      <span class="token number">3.4</span>.3-0             303ce5db0e90        <span class="token number">5</span> months ago        288MB
registry.aliyuncs.com/google_containers/coredns                   <span class="token number">1.6</span>.7               67da37a9a360        <span class="token number">2</span> months ago        <span class="token number">43</span>.8MB
</code></pre>
<h3 id="66-docker-tag-&#x955C;&#x50CF;"><a name="66-docker-tag-&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#66-docker-tag-&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>6.6 docker tag &#x955C;&#x50CF;</h3>
<p>&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x597D;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;tag&#x4E0B;&#x8F7D;&#x597D;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x8BA9;&#x4E0B;&#x8F7D;&#x597D;&#x7684;&#x955C;&#x50CF;&#x90FD;&#x662F;&#x5E26;&#x6709; k8s.gcr.io &#x6807;&#x8BC6;&#x7684;&#xFF0C;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x4ECE;&#x963F; &#x91CC;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF; &#x6807;&#x8BC6;&#x90FD;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6253;tag&#x53D8;&#x6210;k8s.gcr.io&#xFF0C;&#x90A3;&#x4E48;&#x540E;&#x9762;&#x7528;kubeadm&#x5B89;&#x88C5;&#x4F1A;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A; kubeadm&#x91CC;&#x9762;&#x53EA;&#x8BA4; google&#x81EA;&#x8EAB;&#x7684;&#x6A21;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x5B8C;&#x6210;tag&#x6807;&#x8BC6;&#x66F4;&#x6362;&#xFF1A; </p>
<pre class="language-"><code class="lang-bash">$ <span class="token function">cat</span> tag.sh 
<span class="token comment">#!/bin/bash</span>

<span class="token assign-left variable">newtag</span><span class="token operator">=</span>k8s.gcr.io
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> -v TAG <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print $1 &quot;:&quot; $2}&apos;</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
   <span class="token assign-left variable">image</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $i <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">&apos;/&apos;</span> <span class="token string">&apos;{print $3}&apos;</span><span class="token variable">)</span></span>
   <span class="token function">docker</span> tag <span class="token variable">$i</span> <span class="token variable">$newtag</span>/<span class="token variable">$image</span>
   <span class="token function">docker</span> rmi <span class="token variable">$i</span>
<span class="token keyword">done</span>
$ <span class="token function">bash</span> tag.sh
</code></pre>
<h2 id="67-&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><a name="67-&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;" class="anchor-navigation-ex-anchor" href="#67-&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>6.7 &#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;</h2>
<pre class="language-"><code class="lang-bash">k8s.gcr.io/kube-proxy                             v1.18.1             4e68534e24f6        <span class="token number">8</span> days ago          117MB
k8s.gcr.io/kube-controller-manager                v1.18.1             d1ccdd18e6ed        <span class="token number">8</span> days ago          162MB
k8s.gcr.io/kube-apiserver                         v1.18.1             a595af0107f9        <span class="token number">8</span> days ago          173MB
k8s.gcr.io/kube-scheduler                         v1.18.1             6c9320041a7b        <span class="token number">8</span> days ago          <span class="token number">95</span>.3MB
k8s.gcr.io/pause                     <span class="token number">3.2</span>                 80d28bedfe5d        <span class="token number">2</span> months ago        683kB
k8s.gcr.io/coredns                   <span class="token number">1.6</span>.7               67da37a9a360        <span class="token number">2</span> months ago        <span class="token number">43</span>.8MB
k8s.gcr.io/etcd                      <span class="token number">3.4</span>.3-0             303ce5db0e90        <span class="token number">5</span> months ago        288MB
</code></pre>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x53E6;&#x5916;&#x8282;&#x70B9;&#xFF0C;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x4E0B;&#x8F7D;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="7-&#x90E8;&#x7F72;master&#x8282;&#x70B9;"><a name="7-&#x90E8;&#x7F72;master&#x8282;&#x70B9;" class="anchor-navigation-ex-anchor" href="#7-&#x90E8;&#x7F72;master&#x8282;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>7 &#x90E8;&#x7F72;master&#x8282;&#x70B9;</h2>
<h3 id="71--kubeadm-init-&#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;"><a name="71--kubeadm-init-&#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;" class="anchor-navigation-ex-anchor" href="#71--kubeadm-init-&#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1  kubeadm init &#x521D;&#x59CB;&#x5316;master&#x8282;&#x70B9;</h3>
<pre class="language-"><code class="lang-bash">kubeadm init --kubernetes-version<span class="token operator">=</span>v1.18.1 --pod-network-cidr<span class="token operator">=</span><span class="token number">172.22</span>.0.0/16 --apiserver-advertise-address<span class="token operator">=</span><span class="token number">192.168</span>.211.11
</code></pre>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;POD&#x7684;&#x7F51;&#x6BB5;&#x4E3A;: <code>172.22.0.0/16</code>  &#xFF0C;&#x7136;&#x540E;api server&#x5730;&#x5740;&#x5C31;&#x662F;master&#x672C;&#x673A;IP&#x5730;&#x5740;</p>
<h4 id="711-&#x521D;&#x59CB;&#x5316;&#x62A5;&#x9519;"><a name="711-&#x521D;&#x59CB;&#x5316;&#x62A5;&#x9519;" class="anchor-navigation-ex-anchor" href="#711-&#x521D;&#x59CB;&#x5316;&#x62A5;&#x9519;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1.1 &#x521D;&#x59CB;&#x5316;&#x62A5;&#x9519;</h4>
<p><a href="https://github.com/kubernetes/minikube/issues/4770" target="_blank">1.Switch cgroup driver, from cgroupfs to systemd</a> </p>
<pre class="language-"><code class="lang-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># kubeadm init <span class="token operator">--</span>kubernetes<span class="token operator">-</span>version<span class="token operator">=</span>v1<span class="token punctuation">.</span><span class="token number">18.0</span> <span class="token operator">--</span>pod<span class="token operator">-</span>network<span class="token operator">-</span>cidr<span class="token operator">=</span><span class="token number">172.22</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">16</span> <span class="token operator">--</span>apiserver<span class="token operator">-</span>advertise<span class="token operator">-</span>address<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.211</span><span class="token number">.11</span>
W0416 <span class="token number">17</span><span class="token operator">:</span><span class="token number">58</span><span class="token operator">:</span><span class="token number">21.037057</span>   <span class="token number">11830</span> configset<span class="token punctuation">.</span>go<span class="token operator">:</span><span class="token number">202</span><span class="token punctuation">]</span> WARNING<span class="token operator">:</span> kubeadm cannot validate component configs <span class="token keyword">for</span> API groups <span class="token punctuation">[</span>kubelet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>k8s<span class="token punctuation">.</span>io kubeproxy<span class="token punctuation">.</span>config<span class="token punctuation">.</span>k8s<span class="token punctuation">.</span>io<span class="token punctuation">]</span>
<span class="token punctuation">[</span>init<span class="token punctuation">]</span> Using Kubernetes version<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">18.0</span>
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Running pre<span class="token operator">-</span>flight checks
    <span class="token punctuation">[</span>WARNING IsDockerSystemdCheck<span class="token punctuation">]</span><span class="token operator">:</span> detected <span class="token string">&quot;cgroupfs&quot;</span> as the Docker cgroup driver<span class="token punctuation">.</span> The recommended driver is <span class="token string">&quot;systemd&quot;</span><span class="token punctuation">.</span> Please follow the guide at https<span class="token operator">:</span><span class="token comment">//kubernetes.io/docs/setup/cri/</span>
error execution phase preflight<span class="token operator">:</span> <span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Some fatal errors occurred<span class="token operator">:</span>
    <span class="token punctuation">[</span>ERROR NumCPU<span class="token punctuation">]</span><span class="token operator">:</span> the number of available CPUs <span class="token number">1</span> is less than the required <span class="token number">2</span>
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> If you know what you are doing<span class="token punctuation">,</span> you can make a check non<span class="token operator">-</span>fatal with `<span class="token operator">--</span>ignore<span class="token operator">-</span>preflight<span class="token operator">-</span>errors<span class="token operator">=</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>`
To see the stack trace of this error execute with <span class="token operator">--</span>v<span class="token operator">=</span><span class="token number">5</span> or higher
</code></pre>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">$ <span class="token function">cat</span> /etc/docker/daemon.json 
<span class="token punctuation">{</span>  
  <span class="token string">&quot;exec-opts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;native.cgroupdriver=systemd&quot;</span><span class="token punctuation">]</span>,   <span class="token comment">#&#x6DFB;&#x52A0;&#x6B64;&#x884C;</span>
  <span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://q2hy3fzi.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>, 
  <span class="token string">&quot;graph&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/tol/docker-data&quot;</span> 
<span class="token punctuation">}</span> 
$ systemctl restart <span class="token function">docker</span>
</code></pre>
<h4 id="712-&#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;"><a name="712-&#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;" class="anchor-navigation-ex-anchor" href="#712-&#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1.2 &#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;</h4>
<pre class="language-"><code class="lang-bash">$ kubeadm init --kubernetes-version<span class="token operator">=</span>v1.18.0 --pod-network-cidr<span class="token operator">=</span><span class="token number">172.22</span>.0.0/16 --apiserver-advertise-address<span class="token operator">=</span><span class="token number">192.168</span>.211.11
W0416 <span class="token number">18</span>:07:20.031658   <span class="token number">12701</span> configset.go:202<span class="token punctuation">]</span> WARNING: kubeadm cannot validate component configs <span class="token keyword">for</span> API <span class="token function">groups</span> <span class="token punctuation">[</span>kubelet.config.k8s.io kubeproxy.config.k8s.io<span class="token punctuation">]</span>
<span class="token punctuation">[</span>init<span class="token punctuation">]</span> Using Kubernetes version: v1.18.0
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Running pre-flight checks
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Pulling images required <span class="token keyword">for</span> setting up a Kubernetes cluster
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> This might take a minute or two, depending on the speed of your internet connection
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> You can also perform this action <span class="token keyword">in</span> beforehand using <span class="token string">&apos;kubeadm config images pull&apos;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Writing kubelet environment <span class="token function">file</span> with flags to <span class="token function">file</span> <span class="token string">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Writing kubelet configuration to <span class="token function">file</span> <span class="token string">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Starting the kubelet
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Using certificateDir folder <span class="token string">&quot;/etc/kubernetes/pki&quot;</span>
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;ca&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;apiserver&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> apiserver serving cert is signed <span class="token keyword">for</span> DNS names <span class="token punctuation">[</span>master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local<span class="token punctuation">]</span> and IPs <span class="token punctuation">[</span><span class="token number">10.96</span>.0.1 <span class="token number">192.168</span>.211.11<span class="token punctuation">]</span>
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;apiserver-kubelet-client&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;front-proxy-ca&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;front-proxy-client&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;etcd/ca&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;etcd/server&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> etcd/server serving cert is signed <span class="token keyword">for</span> DNS names <span class="token punctuation">[</span>master localhost<span class="token punctuation">]</span> and IPs <span class="token punctuation">[</span><span class="token number">192.168</span>.211.11 <span class="token number">127.0</span>.0.1 ::1<span class="token punctuation">]</span>
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;etcd/peer&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> etcd/peer serving cert is signed <span class="token keyword">for</span> DNS names <span class="token punctuation">[</span>master localhost<span class="token punctuation">]</span> and IPs <span class="token punctuation">[</span><span class="token number">192.168</span>.211.11 <span class="token number">127.0</span>.0.1 ::1<span class="token punctuation">]</span>
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;etcd/healthcheck-client&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;apiserver-etcd-client&quot;</span> certificate and key
<span class="token punctuation">[</span>certs<span class="token punctuation">]</span> Generating <span class="token string">&quot;sa&quot;</span> key and public key
<span class="token punctuation">[</span>kubeconfig<span class="token punctuation">]</span> Using kubeconfig folder <span class="token string">&quot;/etc/kubernetes&quot;</span>
<span class="token punctuation">[</span>kubeconfig<span class="token punctuation">]</span> Writing <span class="token string">&quot;admin.conf&quot;</span> kubeconfig <span class="token function">file</span>
<span class="token punctuation">[</span>kubeconfig<span class="token punctuation">]</span> Writing <span class="token string">&quot;kubelet.conf&quot;</span> kubeconfig <span class="token function">file</span>
<span class="token punctuation">[</span>kubeconfig<span class="token punctuation">]</span> Writing <span class="token string">&quot;controller-manager.conf&quot;</span> kubeconfig <span class="token function">file</span>
<span class="token punctuation">[</span>kubeconfig<span class="token punctuation">]</span> Writing <span class="token string">&quot;scheduler.conf&quot;</span> kubeconfig <span class="token function">file</span>
<span class="token punctuation">[</span>control-plane<span class="token punctuation">]</span> Using manifest folder <span class="token string">&quot;/etc/kubernetes/manifests&quot;</span>
<span class="token punctuation">[</span>control-plane<span class="token punctuation">]</span> Creating static Pod manifest <span class="token keyword">for</span> <span class="token string">&quot;kube-apiserver&quot;</span>
<span class="token punctuation">[</span>control-plane<span class="token punctuation">]</span> Creating static Pod manifest <span class="token keyword">for</span> <span class="token string">&quot;kube-controller-manager&quot;</span>
W0416 <span class="token number">18</span>:07:25.968262   <span class="token number">12701</span> manifests.go:225<span class="token punctuation">]</span> the default kube-apiserver authorization-mode is <span class="token string">&quot;Node,RBAC&quot;</span><span class="token punctuation">;</span> using <span class="token string">&quot;Node,RBAC&quot;</span>
<span class="token punctuation">[</span>control-plane<span class="token punctuation">]</span> Creating static Pod manifest <span class="token keyword">for</span> <span class="token string">&quot;kube-scheduler&quot;</span>
W0416 <span class="token number">18</span>:07:25.969958   <span class="token number">12701</span> manifests.go:225<span class="token punctuation">]</span> the default kube-apiserver authorization-mode is <span class="token string">&quot;Node,RBAC&quot;</span><span class="token punctuation">;</span> using <span class="token string">&quot;Node,RBAC&quot;</span>
<span class="token punctuation">[</span>etcd<span class="token punctuation">]</span> Creating static Pod manifest <span class="token keyword">for</span> <span class="token builtin class-name">local</span> etcd <span class="token keyword">in</span> <span class="token string">&quot;/etc/kubernetes/manifests&quot;</span>
<span class="token punctuation">[</span>wait-control-plane<span class="token punctuation">]</span> Waiting <span class="token keyword">for</span> the kubelet to boot up the control plane as static Pods from directory <span class="token string">&quot;/etc/kubernetes/manifests&quot;</span><span class="token builtin class-name">.</span> This can take up to 4m0s
<span class="token punctuation">[</span>apiclient<span class="token punctuation">]</span> All control plane components are healthy after <span class="token number">20.507370</span> seconds
<span class="token punctuation">[</span>upload-config<span class="token punctuation">]</span> Storing the configuration used <span class="token keyword">in</span> ConfigMap <span class="token string">&quot;kubeadm-config&quot;</span> <span class="token keyword">in</span> the <span class="token string">&quot;kube-system&quot;</span> Namespace
<span class="token punctuation">[</span>kubelet<span class="token punctuation">]</span> Creating a ConfigMap <span class="token string">&quot;kubelet-config-1.18&quot;</span> <span class="token keyword">in</span> namespace kube-system with the configuration <span class="token keyword">for</span> the kubelets <span class="token keyword">in</span> the cluster
<span class="token punctuation">[</span>upload-certs<span class="token punctuation">]</span> Skipping phase. Please see --upload-certs
<span class="token punctuation">[</span>mark-control-plane<span class="token punctuation">]</span> Marking the <span class="token function">node</span> master as control-plane by adding the label <span class="token string">&quot;node-role.kubernetes.io/master=&apos;&apos;&quot;</span>
<span class="token punctuation">[</span>mark-control-plane<span class="token punctuation">]</span> Marking the <span class="token function">node</span> master as control-plane by adding the taints <span class="token punctuation">[</span>node-role.kubernetes.io/master:NoSchedule<span class="token punctuation">]</span>
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> Using token: 16l83a.e1tpcgkmze0i3fuy
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> configured RBAC rules to allow Node Bootstrap tokens to get nodes
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> configured RBAC rules to allow Node Bootstrap tokens to post CSRs <span class="token keyword">in</span> order <span class="token keyword">for</span> nodes to get long term certificate credentials
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> configured RBAC rules to allow certificate rotation <span class="token keyword">for</span> all <span class="token function">node</span> client certificates <span class="token keyword">in</span> the cluster
<span class="token punctuation">[</span>bootstrap-token<span class="token punctuation">]</span> Creating the <span class="token string">&quot;cluster-info&quot;</span> ConfigMap <span class="token keyword">in</span> the <span class="token string">&quot;kube-public&quot;</span> namespace
<span class="token punctuation">[</span>kubelet-finalize<span class="token punctuation">]</span> Updating <span class="token string">&quot;/etc/kubernetes/kubelet.conf&quot;</span> to point to a rotatable kubelet client certificate and key
<span class="token punctuation">[</span>addons<span class="token punctuation">]</span> Applied essential addon: CoreDNS
<span class="token punctuation">[</span>addons<span class="token punctuation">]</span> Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully<span class="token operator">!</span>

To start using your cluster, you need to run the following as a regular user:

  <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
  <span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
  <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config

You should now deploy a pod network to the cluster.
Run <span class="token string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can <span class="token function">join</span> any number of worker nodes by running the following on each as root:
<span class="token comment">#&#x4FDD;&#x5B58;&#x521D;&#x59CB;&#x5316;node&#x7528;&#x5230;&#x7684;&#x547D;&#x4EE4;</span>
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.211.11:6443 --token 16l83a.e1tpcgkmze0i3fuy <span class="token punctuation">\</span>
    --discovery-token-ca-cert-hash sha256:233a3d9c6c0ed466642c08293e0bf2bb217359d414d3ccb0bf25afa1c00b7ca3
</code></pre>
<h3 id="72--&#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;"><a name="72--&#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;" class="anchor-navigation-ex-anchor" href="#72--&#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>7.2  &#x9A8C;&#x8BC1;&#x6D4B;&#x8BD5;</h3>
<p>&#x914D;&#x7F6E;kubectl&#x547D;&#x4EE4; </p>
<pre class="language-"><code class="lang-bash"><span class="token function">mkdir</span> -p /root/.kube
<span class="token function">cp</span> /etc/kubernetes/admin.conf /root/.kube/config
</code></pre>
<p>&#x83B7;&#x53D6;pods&#x5217;&#x8868;&#x547D;&#x4EE4;
&#x5176;&#x4E2D;coredns pod&#x5904;&#x4E8E;<code>Pending</code>&#x72B6;&#x6001;&#xFF0C;<strong>&#x8FD9;&#x4E2A;&#x5148;&#x4E0D;&#x7BA1;</strong></p>
<pre class="language-"><code class="lang-bash">kubectl get pods --all-namespaces
</code></pre>
<p>&#x67E5;&#x770B;&#x96C6;&#x7FA4;&#x7684;&#x5065;&#x5EB7;&#x72B6;&#x6001;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">$ kubectl get cs 
etcd-0               Healthy   <span class="token punctuation">{</span><span class="token string">&quot;health&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>   
controller-manager   Healthy   ok                  
scheduler            Healthy   ok
</code></pre>
<hr>
<h2 id="8-&#x90E8;&#x7F72;calico&#x7F51;&#x7EDC;-&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><a name="8-&#x90E8;&#x7F72;calico&#x7F51;&#x7EDC;-&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;" class="anchor-navigation-ex-anchor" href="#8-&#x90E8;&#x7F72;calico&#x7F51;&#x7EDC;-&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>8 &#x90E8;&#x7F72;calico&#x7F51;&#x7EDC; &#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;</h2>
<p><a href="https://docs.projectcalico.org/v3.0/introduction/" target="_blank">calico&#x5B98;&#x7F51;</a>
<a href="https://www.lijiaocn.com/%E9%A1%B9%E7%9B%AE/2017/04/11/calico-usage.html" target="_blank">calico&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</a>
calico&#x4ECB;&#x7ECD;&#xFF1A;Calico&#x662F;&#x4E00;&#x4E2A;&#x7EAF;&#x4E09;&#x5C42;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5176;&#x597D;&#x5904;&#x662F;&#x5B83;&#x6574;&#x5408;&#x4E86;&#x5404;&#x79CD;&#x4E91;&#x539F;&#x751F;&#x5E73;&#x53F0;(Docker&#x3001;Mesos &#x4E0E; OpenStack &#x7B49;)&#xFF0C;&#x6BCF;&#x4E2A; Kubernetes &#x8282;&#x70B9;&#x4E0A;&#x901A;&#x8FC7; Linux Kernel &#x73B0;&#x6709;&#x7684; L3 forwarding &#x529F;&#x80FD;&#x6765;&#x5B9E;&#x73B0; vRouter &#x529F;&#x80FD;&#x3002;</p>
<h3 id="81calico&#x5B98;&#x65B9;&#x955C;&#x50CF;-&#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;"><a name="81calico&#x5B98;&#x65B9;&#x955C;&#x50CF;-&#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;" class="anchor-navigation-ex-anchor" href="#81calico&#x5B98;&#x65B9;&#x955C;&#x50CF;-&#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>8.1calico&#x5B98;&#x65B9;&#x955C;&#x50CF; &#x4E0B;&#x8F7D;&#x3001;&#x6807;&#x7B7E;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">docker</span> pull calico/node:v3.1.4
<span class="token function">docker</span> pull calico/cni:v3.1.4
<span class="token function">docker</span> pull calico/typha:v3.1.4
<span class="token function">docker</span> tag calico/node:v3.1.4 quay.io/calico/node:v3.1.4
<span class="token function">docker</span> tag calico/cni:v3.1.4 quay.io/calico/cni:v3.1.4
<span class="token function">docker</span> tag calico/typha:v3.1.4 quay.io/calico/typha:v3.1.4
<span class="token function">docker</span> rmi calico/node:v3.1.4
<span class="token function">docker</span> rmi calico/cni:v3.1.4
<span class="token function">docker</span> rmi calico/typha:v3.1.4
</code></pre>
<h3 id="82-&#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kddyaml&#x6587;&#x4EF6;"><a name="82-&#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kddyaml&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#82-&#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kddyaml&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>8.2 &#x4E0B;&#x8F7D;&#x6267;&#x884C;rbac-kdd.yaml&#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">curl</span> https://docs.projectcalico.org/v3.1/getting-started/kubernetes/installation/hosted/rbac-kdd.yaml -O
kubectl apply -f rbac-kdd.yaml
</code></pre>
<h3 id="83-&#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calicoyaml&#x6587;&#x4EF6;"><a name="83-&#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calicoyaml&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#83-&#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calicoyaml&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>8.3 &#x4E0B;&#x8F7D;&#x3001;&#x914D;&#x7F6E;calico.yaml&#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">curl</span> https://docs.projectcalico.org/v3.1/getting-started/kubernetes/installation/hosted/kubernetes-datastore/policy-only/1.7/calico.yaml -O
</code></pre>
<h3 id="84-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><a name="84-&#x4FEE;&#x6539;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#84-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>8.4 &#x4FEE;&#x6539;&#x914D;&#x7F6E;</h3>
<h4 id="841-&#x4FEE;&#x6539;configmap"><a name="841-&#x4FEE;&#x6539;configmap" class="anchor-navigation-ex-anchor" href="#841-&#x4FEE;&#x6539;configmap"><i class="fa fa-link" aria-hidden="true"></i></a>8.4.1 &#x4FEE;&#x6539;ConfigMap</h4>
<p>&#x628A;ConfigMap &#x4E0B;&#x7684; typha_service_name &#x503C;&#x7531;none&#x53D8;&#x6210; calico-typha</p>
<pre class="language-"><code class="lang-bash">kind: ConfigMap
apiVersion: v1
metadata:
  name: calico-config
  namespace: kube-system
data:
  <span class="token comment"># You must set a non-zero value for Typha replicas below.</span>
  typha_service_name: <span class="token string">&quot;calico-typha&quot;</span>
</code></pre>
<h4 id="842-&#x4FEE;&#x6539;deployment"><a name="842-&#x4FEE;&#x6539;deployment" class="anchor-navigation-ex-anchor" href="#842-&#x4FEE;&#x6539;deployment"><i class="fa fa-link" aria-hidden="true"></i></a>8.4.2 &#x4FEE;&#x6539;Deployment</h4>
<p>&#x8BBE;&#x7F6E; Deployment &#x7C7B;&#x76EE;&#x7684; spec &#x4E0B;&#x7684;replicas&#x503C;</p>
<pre class="language-"><code class="lang-bash">apiVersion: apps/v1
kind: Deployment
metadata:
  name: calico-typha
  namespace: kube-system
  labels:
    k8s-app: calico-typha
spec:
  <span class="token comment"># Number of Typha replicas.  To enable Typha, set this to a non-zero value *and* set the</span>
  <span class="token comment"># typha_service_name variable in the calico-config ConfigMap above.</span>
  <span class="token comment">#</span>
  <span class="token comment"># We recommend using Typha if you have more than 50 nodes.  Above 100 nodes it is essential</span>
  <span class="token comment"># (when using the Kubernetes datastore).  Use one replica for every 100-200 nodes.  In</span>
  <span class="token comment"># production, we recommend running at least 3 replicas to reduce the impact of rolling upgrade.</span>
  replicas: <span class="token number">1</span>
  revisionHistoryLimit: <span class="token number">2</span>
</code></pre>
<h4 id="843-&#x4FEE;&#x6539;-&#x5B9A;&#x4E49;pod&#x7F51;&#x6BB5;"><a name="843-&#x4FEE;&#x6539;-&#x5B9A;&#x4E49;pod&#x7F51;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#843-&#x4FEE;&#x6539;-&#x5B9A;&#x4E49;pod&#x7F51;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>8.4.3 &#x4FEE;&#x6539; &#x5B9A;&#x4E49;POD&#x7F51;&#x6BB5;</h4>
<p>&#x6211;&#x4EEC;&#x627E;&#x5230;CALICO_IPV4POOL_CIDR&#xFF0C;&#x7136;&#x540E;&#x503C;&#x4FEE;&#x6539;&#x6210;&#x4E4B;&#x524D;&#x5B9A;&#x4E49;&#x597D;&#x7684;POD&#x7F51;&#x6BB5;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x662F;172.22.0.0/16</p>
<pre class="language-"><code class="lang-bash">- name: CALICO_IPV4POOL_CIDR
  value: <span class="token string">&quot;172.22.0.0/16&quot;</span>
</code></pre>
<h4 id="844-&#x5F00;&#x542F;bird&#x6A21;&#x5F0F;"><a name="844-&#x5F00;&#x542F;bird&#x6A21;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#844-&#x5F00;&#x542F;bird&#x6A21;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>8.4.4 &#x5F00;&#x542F;bird&#x6A21;&#x5F0F;</h4>
<p>&#x628A; CALICO_NETWORKING_BACKEND &#x503C;&#x8BBE;&#x7F6E;&#x4E3A; bird &#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x8BBE;&#x7F6E;BGP&#x7F51;&#x7EDC;&#x540E;&#x7AEF;&#x6A21;&#x5F0F;</p>
<pre class="language-"><code class="lang-bash"> - name: CALICO_NETWORKING_BACKEND
   value: <span class="token string">&quot;bird&quot;</span>
</code></pre>
<h3 id="85-&#x90E8;&#x7F72;calicoyaml&#x6587;&#x4EF6;"><a name="85-&#x90E8;&#x7F72;calicoyaml&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#85-&#x90E8;&#x7F72;calicoyaml&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>8.5 &#x90E8;&#x7F72;calico.yaml&#x6587;&#x4EF6;</h3>
<p> &#x4E0A;&#x9762;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x8C03;&#x4F18;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5F7B;&#x5E95;&#x90E8;&#x7F72;calico </p>
<pre class="language-"><code class="lang-bash"> kubectl apply -f calico.yaml
</code></pre>
<h3 id="86-&#x67E5;&#x770B;&#x72B6;&#x6001;"><a name="86-&#x67E5;&#x770B;&#x72B6;&#x6001;" class="anchor-navigation-ex-anchor" href="#86-&#x67E5;&#x770B;&#x72B6;&#x6001;"><i class="fa fa-link" aria-hidden="true"></i></a>8.6 &#x67E5;&#x770B;&#x72B6;&#x6001;</h3>
<pre class="language-"><code class="lang-bash">kubectl get pods --all-namespaces
</code></pre>
<p>&#x8FD9;&#x91CC;calico-typha &#x6CA1;&#x8D77;&#x6765;&#xFF0C;&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;node &#x8BA1;&#x7B97;&#x8282;&#x70B9;&#x8FD8;&#x6CA1;&#x542F;&#x52A8;&#x548C;&#x5B89;&#x88C5;&#x3002;</p>
<h2 id="9-&#x90E8;&#x7F72;node&#x8282;&#x70B9;"><a name="9-&#x90E8;&#x7F72;node&#x8282;&#x70B9;" class="anchor-navigation-ex-anchor" href="#9-&#x90E8;&#x7F72;node&#x8282;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>9 &#x90E8;&#x7F72;node&#x8282;&#x70B9;</h2>
<h3 id="91-&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;"><a name="91-&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;" class="anchor-navigation-ex-anchor" href="#91-&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>9.1 &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x955C;&#x50CF;&#xFF08;&#x5728;node&#x4E0A;&#x6267;&#x884C;&#xFF09;</h3>
<p>node&#x4E0A;&#x4E5F;&#x662F;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x4E00;&#x4E9B;&#x955C;&#x50CF;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x4E3A;&#xFF1A;<code>kube-proxy:v1.13&#x3001;pause:3.1&#x3001;caliconode:v3.1.4&#x3001;calico-cni:v3.1.4&#x3001;calico-typha:v3.1.4</code></p>
<pre class="language-"><code class="lang-bash"><span class="token function">docker</span> pull registry.aliyuncs.com/google_containers/kube-proxy:v1.13.0
<span class="token function">docker</span> pull registry.aliyuncs.com/google_containers/pause:3.1
<span class="token function">docker</span> pull calico/node:v3.1.4
<span class="token function">docker</span> pull calico/cni:v3.1.4
<span class="token function">docker</span> pull calico/typha:v3.1.4

<span class="token function">docker</span> tag registry.aliyuncs.com/google_containers/kube-proxy:v1.13.0 k8s.gcr.io/kubeproxy:v1.13.0
<span class="token function">docker</span> tag registry.aliyuncs.com/google_containers/pause:3.1 k8s.gcr.io/pause:3.1
<span class="token function">docker</span> tag calico/node:v3.1.4 quay.io/calico/node:v3.1.4
<span class="token function">docker</span> tag calico/cni:v3.1.4 quay.io/calico/cni:v3.1.4
<span class="token function">docker</span> tag calico/typha:v3.1.4 quay.io/calico/typha:v3.1.4

<span class="token function">docker</span> rmi registry.aliyuncs.com/google_containers/kube-proxy:v1.13.0
<span class="token function">docker</span> rmi registry.aliyuncs.com/google_containers/pause:3.1
<span class="token function">docker</span> rmi calico/node:v3.1.4
<span class="token function">docker</span> rmi calico/cni:v3.1.4
<span class="token function">docker</span> rmi calico/typha:v3.1.4
</code></pre>
<h3 id="92--&#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC;-&#xFF08;kubeadm-init-&#x751F;&#x6210;&#xFF09;"><a name="92--&#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC;-&#xFF08;kubeadm-init-&#x751F;&#x6210;&#xFF09;" class="anchor-navigation-ex-anchor" href="#92--&#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC;-&#xFF08;kubeadm-init-&#x751F;&#x6210;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>9.2  &#x628A;node&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x91CC; &#xFF08;kubeadm init &#x751F;&#x6210;&#xFF09;</h3>
<pre class="language-"><code class="lang-c"><span class="token punctuation">[</span>root@node <span class="token operator">~</span><span class="token punctuation">]</span># kubeadm join <span class="token number">192.168</span><span class="token number">.211</span><span class="token number">.11</span><span class="token operator">:</span><span class="token number">6443</span> <span class="token operator">--</span>token <span class="token number">16l</span><span class="token number">83</span>a<span class="token punctuation">.</span>e1tpcgkmze0i3fuy \
<span class="token operator">&gt;</span>     <span class="token operator">--</span>discovery<span class="token operator">-</span>token<span class="token operator">-</span>ca<span class="token operator">-</span>cert<span class="token operator">-</span>hash sha256<span class="token operator">:</span><span class="token number">233</span>a3d9c6c0ed466642c08293e0bf2bb217359d414d3ccb0bf25afa1c00b7ca3 
W0416 <span class="token number">21</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">26.704823</span>   <span class="token number">21506</span> join<span class="token punctuation">.</span>go<span class="token operator">:</span><span class="token number">346</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> WARNING<span class="token operator">:</span> JoinControlPane<span class="token punctuation">.</span>controlPlane settings will be ignored when control<span class="token operator">-</span>plane flag is not set<span class="token punctuation">.</span>
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Running pre<span class="token operator">-</span>flight checks
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Reading configuration from the cluster<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> FYI<span class="token operator">:</span> You can look at this config file with &apos;kubectl <span class="token operator">-</span>n kube<span class="token operator">-</span>system get cm kubeadm<span class="token operator">-</span>config <span class="token operator">-</span>oyaml&apos;
<span class="token punctuation">[</span>kubelet<span class="token operator">-</span>start<span class="token punctuation">]</span> Downloading configuration <span class="token keyword">for</span> the kubelet from the <span class="token string">&quot;kubelet-config-1.18&quot;</span> ConfigMap in the kube<span class="token operator">-</span>system namespace
<span class="token punctuation">[</span>kubelet<span class="token operator">-</span>start<span class="token punctuation">]</span> Writing kubelet configuration to file <span class="token string">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="token punctuation">[</span>kubelet<span class="token operator">-</span>start<span class="token punctuation">]</span> Writing kubelet environment file with flags to file <span class="token string">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="token punctuation">[</span>kubelet<span class="token operator">-</span>start<span class="token punctuation">]</span> Starting the kubelet
<span class="token punctuation">[</span>kubelet<span class="token operator">-</span>start<span class="token punctuation">]</span> Waiting <span class="token keyword">for</span> the kubelet to perform the TLS Bootstrap<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

This node has joined the cluster<span class="token operator">:</span>
<span class="token operator">*</span> Certificate signing request was sent to apiserver and a response was received<span class="token punctuation">.</span>
<span class="token operator">*</span> The Kubelet was informed of the new secure connection details<span class="token punctuation">.</span>

Run <span class="token char">&apos;kubectl get nodes&apos;</span> on the control<span class="token operator">-</span>plane to see this node join the cluster<span class="token punctuation">.</span>
</code></pre>
<p>&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x8FD0;&#x884C;&#x7684;&#x53C2;&#x6570;&#x547D;&#x4EE4;&#x4E00;&#x6837;&#xFF0C;&#x8FD0;&#x884C;&#x5B8C;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728;master&#x8282;&#x70B9;&#x4E0A;&#x8FD0;&#x884C; kubectl get nodes &#x547D;&#x4EE4;&#x67E5;&#x770B;node &#x662F;&#x5426;&#x6B63;&#x5E38;</p>
<pre class="language-"><code class="lang-bash">kubectl get nodes
</code></pre>
<p>&#x5230;&#x6B64;&#xFF0C;&#x96C6;&#x7FA4;&#x7684;&#x642D;&#x5EFA;&#x5B8C;&#x6210;&#x4E86;90%&#xFF0C;&#x5269;&#x4E0B;&#x4E00;&#x4E2A;&#x662F;&#x642D;&#x5EFA;dashboard</p>
<h2 id="10-&#x90E8;&#x7F72;dashboard"><a name="10-&#x90E8;&#x7F72;dashboard" class="anchor-navigation-ex-anchor" href="#10-&#x90E8;&#x7F72;dashboard"><i class="fa fa-link" aria-hidden="true"></i></a>10 &#x90E8;&#x7F72;dashboard</h2>
<p>&#x90E8;&#x7F72;dashboard&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x751F;&#x6210;&#x8BC1;&#x4E66;&#xFF0C;&#x4E0D;&#x7136;&#x540E;&#x9762;&#x4F1A;https&#x8BBF;&#x95EE;&#x767B;&#x5F55;&#x4E0D;&#x4E86;&#x3002;</p>
<h3 id="101-&#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;"><a name="101-&#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;" class="anchor-navigation-ex-anchor" href="#101-&#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;"><i class="fa fa-link" aria-hidden="true"></i></a>10.1 &#x751F;&#x6210;&#x79C1;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;</h3>
<pre class="language-"><code class="lang-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># mkdir <span class="token operator">-</span>p <span class="token operator">/</span>etc<span class="token operator">/</span>kubernetes<span class="token operator">/</span>certs
<span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># cd <span class="token operator">/</span>etc<span class="token operator">/</span>kubernetes<span class="token operator">/</span>certs
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># ls
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># openssl genrsa <span class="token operator">-</span>des3 <span class="token operator">-</span>passout pass<span class="token operator">:</span>x <span class="token operator">-</span>out dashboard<span class="token punctuation">.</span>pass<span class="token punctuation">.</span>key <span class="token number">2048</span>
Generating RSA private key<span class="token punctuation">,</span> <span class="token number">2048</span> bit <span class="token keyword">long</span> modulus
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">++</span><span class="token operator">+</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">++</span><span class="token operator">+</span>
e is <span class="token number">65537</span> <span class="token punctuation">(</span><span class="token number">0x10001</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># ll
&#x603B;&#x7528;&#x91CF; <span class="token number">4</span>
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span><span class="token punctuation">.</span> <span class="token number">1</span> root root <span class="token number">1751</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">15</span> dashboard<span class="token punctuation">.</span>pass<span class="token punctuation">.</span>key
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># openssl rsa <span class="token operator">-</span>passin pass<span class="token operator">:</span>x <span class="token operator">-</span>in dashboard<span class="token punctuation">.</span>pass<span class="token punctuation">.</span>key <span class="token operator">-</span>out dashboard<span class="token punctuation">.</span>key
writing RSA key
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># ll
&#x603B;&#x7528;&#x91CF; <span class="token number">8</span>
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span><span class="token punctuation">.</span> <span class="token number">1</span> root root <span class="token number">1679</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">16</span> dashboard<span class="token punctuation">.</span>key
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span><span class="token punctuation">.</span> <span class="token number">1</span> root root <span class="token number">1751</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">15</span> dashboard<span class="token punctuation">.</span>pass<span class="token punctuation">.</span>key
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># rm <span class="token operator">-</span>rf dashboard<span class="token punctuation">.</span>pass<span class="token punctuation">.</span>key 
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># openssl req <span class="token operator">-</span>new <span class="token operator">-</span>key dashboard<span class="token punctuation">.</span>key <span class="token operator">-</span>out dashboard<span class="token punctuation">.</span>csr
You are about to be asked to enter information that will be incorporated
into your certificate request<span class="token punctuation">.</span>
What you are about to enter is what is called a Distinguished Name or a DN<span class="token punctuation">.</span>
There are quite a few fields but you can leave some blank
For some fields there will be a <span class="token keyword">default</span> value<span class="token punctuation">,</span>
If you enter <span class="token char">&apos;.&apos;</span><span class="token punctuation">,</span> the field will be left blank<span class="token punctuation">.</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
Country <span class="token function">Name</span> <span class="token punctuation">(</span><span class="token number">2</span> letter code<span class="token punctuation">)</span> <span class="token punctuation">[</span>XX<span class="token punctuation">]</span><span class="token operator">:</span>
State or Province <span class="token function">Name</span> <span class="token punctuation">(</span>full name<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>
Locality <span class="token function">Name</span> <span class="token punctuation">(</span>eg<span class="token punctuation">,</span> city<span class="token punctuation">)</span> <span class="token punctuation">[</span>Default City<span class="token punctuation">]</span><span class="token operator">:</span>
Organization <span class="token function">Name</span> <span class="token punctuation">(</span>eg<span class="token punctuation">,</span> company<span class="token punctuation">)</span> <span class="token punctuation">[</span>Default Company Ltd<span class="token punctuation">]</span><span class="token operator">:</span>
Organizational Unit <span class="token function">Name</span> <span class="token punctuation">(</span>eg<span class="token punctuation">,</span> section<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>
Common <span class="token function">Name</span> <span class="token punctuation">(</span>eg<span class="token punctuation">,</span> your name or your server&apos;s hostname<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>
Email Address <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>

Please enter the following <span class="token char">&apos;extra&apos;</span> attributes
to be sent with your certificate request
A challenge password <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>
An optional company name <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>
<span class="token punctuation">[</span>root@master certs<span class="token punctuation">]</span># ll
&#x603B;&#x7528;&#x91CF; <span class="token number">8</span>
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span><span class="token punctuation">.</span> <span class="token number">1</span> root root  <span class="token number">952</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">18</span> dashboard<span class="token punctuation">.</span>csr
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span><span class="token punctuation">.</span> <span class="token number">1</span> root root <span class="token number">1679</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">16</span> dashboard<span class="token punctuation">.</span>key
</code></pre>
<p>&#x751F;&#x6210;SSL&#x8BC1;&#x4E66; </p>
<pre class="language-"><code class="lang-bash">openssl x509 -req -sha256 -days <span class="token number">365</span> -in dashboard.csr -signkey dashboard.key -out dashboard.crt
</code></pre>
<p>dashboard.crt&#x6587;&#x4EF6;&#x662F;&#x9002;&#x7528;&#x4E8E;&#x4EEA;&#x8868;&#x677F;&#x548C;dashboard.key&#x79C1;&#x94A5;&#x7684;&#x8BC1;&#x4E66;&#x3002;</p>
<pre class="language-"><code class="lang-bash">$  ll /etc/kubernetes/certs/
&#x603B;&#x7528;&#x91CF; <span class="token number">12</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1103</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span>:20 dashboard.crt
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">952</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span>:18 dashboard.csr
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1679</span> <span class="token number">4</span>&#x6708;  <span class="token number">16</span> <span class="token number">21</span>:16 dashboard.key
</code></pre>
<p>&#x521B;&#x5EFA;secret </p>
<pre class="language-"><code class="lang-bash">kubectl create secret generic kubernetes-dashboard-certs --from-file<span class="token operator">=</span>/etc/kubernetes/certs -n kube-system
</code></pre>
<p>&#x6CE8;&#x610F;/etc/kubernetes/certs &#x662F;&#x4E4B;&#x524D;&#x521B;&#x5EFA;crt&#x3001;csr&#x3001;key &#x8BC1;&#x4E66;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;</p>
<h3 id="102-&#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;"><a name="102-&#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;" class="anchor-navigation-ex-anchor" href="#102-&#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>10.2 &#x4E0B;&#x8F7D;dashboard&#x955C;&#x50CF;&#x3001;tag&#x955C;&#x50CF;&#xFF08;&#x5728;&#x5168;&#x90E8;&#x8282;&#x70B9;&#x4E0A;&#xFF09;</h3>
<pre class="language-"><code class="lang-bash">$ <span class="token function">vim</span> dashboard.sh
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">tag</span><span class="token operator">=</span>v2.0.0-rc7
<span class="token function">docker</span> pull registry.cn-hangzhou.aliyuncs.com/kubernete/kubernetes-dashboard-amd64:<span class="token variable">$tag</span>
<span class="token function">docker</span> tag registry.cn-hangzhou.aliyuncs.com/kubernete/kubernetes-dashboard-amd64:v<span class="token variable">$tag</span> k8s.gcr.io/kubernetes-dashboard:<span class="token variable">$tag</span>
<span class="token function">docker</span> rmi registry.cn-hangzhou.aliyuncs.com/kubernete/kubernetes-dashboard-amd64:<span class="token variable">$tag</span>
$ <span class="token function">bash</span> dashboard.sh
</code></pre>
<h3 id="10-3-&#x4E0B;&#x8F7D;-kubernetes-dashboardyaml-&#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><a name="10-3-&#x4E0B;&#x8F7D;-kubernetes-dashboardyaml-&#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;" class="anchor-navigation-ex-anchor" href="#10-3-&#x4E0B;&#x8F7D;-kubernetes-dashboardyaml-&#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>10. 3 &#x4E0B;&#x8F7D; kubernetes-dashboard.yaml &#x90E8;&#x7F72;&#x6587;&#x4EF6;&#xFF08;&#x5728;master&#x4E0A;&#x6267;&#x884C;&#xFF09;</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">curl</span> https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml -O
</code></pre>
<h3 id="104-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><a name="104-&#x4FEE;&#x6539;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#104-&#x4FEE;&#x6539;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4 &#x4FEE;&#x6539;&#x914D;&#x7F6E;</h3>
<h4 id="1041-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x7248;&#x672C;"><a name="1041-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#1041-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4.1 &#x4FEE;&#x6539;&#x955C;&#x50CF;&#x7248;&#x672C;</h4>
<pre class="language-"><code class="lang-bash"><span class="token function">sed</span> -i <span class="token string">&quot;s/kubernetes-dashboard-amd64:v1.10.0/kubernetes-dashboard:<span class="token variable">$tag</span>/g&quot;</span> kubernetes-dashboard.yaml
</code></pre>
<h4 id="1042--&#x628A;secret-&#x6CE8;&#x91CA;"><a name="1042--&#x628A;secret-&#x6CE8;&#x91CA;" class="anchor-navigation-ex-anchor" href="#1042--&#x628A;secret-&#x6CE8;&#x91CA;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4.2  &#x628A;Secret &#x6CE8;&#x91CA;</h4>
<p>&#x56E0;&#x4E3A;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4E86;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#x7684;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment">#apiVersion: v1</span>
<span class="token comment">#kind: Secret</span>
<span class="token comment">#metadata:</span>
<span class="token comment">#  labels:</span>
<span class="token comment">#    k8s-app: kubernetes-dashboard</span>
<span class="token comment">#  name: kubernetes-dashboard-certs    </span>
<span class="token comment">#  namespace: kubernetes-dashboard</span>
<span class="token comment">#type: Opaque</span>
<span class="token comment">#</span>
<span class="token comment">#---</span>
</code></pre>
<h4 id="1043--&#x914D;&#x7F6E;443&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5916;&#x90E8;&#x4E3B;&#x673A;30005&#x4E0A;"><a name="1043--&#x914D;&#x7F6E;443&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5916;&#x90E8;&#x4E3B;&#x673A;30005&#x4E0A;" class="anchor-navigation-ex-anchor" href="#1043--&#x914D;&#x7F6E;443&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5916;&#x90E8;&#x4E3B;&#x673A;30005&#x4E0A;"><i class="fa fa-link" aria-hidden="true"></i></a>10.4.3  &#x914D;&#x7F6E;443&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5916;&#x90E8;&#x4E3B;&#x673A;30005&#x4E0A;</h4>
<pre class="language-"><code class="lang-bash">metadata:
  labels:
    k8s-app: kubernetes-dashboard
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  ports:
    - port: <span class="token number">443</span>
      targetPort: <span class="token number">8443</span>
      nodePort: <span class="token number">30005</span>  <span class="token comment">#&#x6DFB;&#x52A0;</span>
  type: NodePort     <span class="token comment">#&#x6DFB;&#x52A0;</span>
  selector:
    k8s-app: kubernetes-dashboard
</code></pre>
<h3 id="105-&#x521B;&#x5EFA;dashboard&#x7684;pod"><a name="105-&#x521B;&#x5EFA;dashboard&#x7684;pod" class="anchor-navigation-ex-anchor" href="#105-&#x521B;&#x5EFA;dashboard&#x7684;pod"><i class="fa fa-link" aria-hidden="true"></i></a>10.5 &#x521B;&#x5EFA;dashboard&#x7684;pod</h3>
<pre class="language-"><code class="lang-bash">  kubectl create -f  kubernetes-dashboard.yaml
</code></pre>
<h3 id="106-&#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;"><a name="106-&#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;" class="anchor-navigation-ex-anchor" href="#106-&#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;"><i class="fa fa-link" aria-hidden="true"></i></a>10.6 &#x67E5;&#x770B;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x60C5;&#x51B5;</h3>
<pre class="language-"><code class="lang-bash"> kubectl get deployment kubernetes-dashboard -n kube-system
 kubectl --namespace kubesystem get pods -o wide
 kubectl get services kubernetes-dashboard -n kube-system 
 <span class="token function">netstat</span> -ntlp<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">30005</span>
</code></pre>
<h3 id="107-dashboard-bug&#x5904;&#x7406;"><a name="107-dashboard-bug&#x5904;&#x7406;" class="anchor-navigation-ex-anchor" href="#107-dashboard-bug&#x5904;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>10.7 Dashboard BUG&#x5904;&#x7406;</h3>
<p><img src="https://img-blog.csdnimg.cn/20200419233923963.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpeGloYWhhbGVsZWhlaGU=,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x70B9;&#x51FB;&#x8DF3;&#x8FC7;
<img src="https://img-blog.csdnimg.cn/20200419233941483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpeGloYWhhbGVsZWhlaGU=,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<pre class="language-"><code class="lang-bash">$ <span class="token function">vim</span> kube-dashboard-access.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: kubernetes-dashboard
  labels: 
    k8s-app: kubernetes-dashboard
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: kubernetes-dashboard
  namespace: kube-system
</code></pre>
<p>&#x6267;&#x884C;&#x8BA9;kube-dashboard-access.yaml </p>
<pre class="language-"><code class="lang-bash"> kubectl create -f kube-dashboard-access.yaml
</code></pre>
<p>&#x7136;&#x540E;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x754C;&#x9762;&#x5237;&#x65B0;&#x4E0B;&#xFF0C;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x4EA7;&#x751F;&#x4E00;&#x4E0B;&#x95EE;&#x9898;&#x3002;
&#x95EE;&#x9898;
<a href="https://github.com/kubernetes-sigs/kubespray/issues/5347" target="_blank">Server Error 404. It will give you 3 seconds to redirect back to the login page. 
Kubernetes dashboard the server could not find the requested resource</a></p>
<p>&#x95EE;&#x9898;&#x539F;&#x56E0;&#xFF1A;dashboard&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x6240;&#x81F4;&#x3002;
&#x5C06;dashboard&#x7248;&#x672C;&#x5347;&#x7EA7;
Deleted version <code>1.10.1</code> and switched to <code>v2.0.0-beta8</code> 
&#x7136;&#x540E;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x754C;&#x9762;&#x5237;&#x65B0;&#x4E0B;&#x3002;
<img src="https://img-blog.csdnimg.cn/20200419234058939.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpeGloYWhhbGVsZWhlaGU=,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; ghostwritten &#x6D59;ICP&#x5907;2020032454&#x53F7; 2022 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2022-08-10 08:58:03
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="kubernetes-minikube-deploy.html" class="navigation navigation-prev " aria-label="Previous page: minikube">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../对象/" class="navigation navigation-next " aria-label="Next page: 对象">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"手动","level":"1.9.2","depth":2,"next":{"title":"对象","level":"1.10","depth":1,"path":"对象/README.md","ref":"对象/README.md","articles":[{"title":"Deployment","level":"1.10.1","depth":2,"path":"对象/Deployment/README.md","ref":"对象/Deployment/README.md","articles":[{"title":"技巧","level":"1.10.1.1","depth":3,"path":"对象/Deployment/kubernetes-deployment-skill.md","ref":"对象/Deployment/kubernetes-deployment-skill.md","articles":[]},{"title":"开发","level":"1.10.1.2","depth":3,"path":"对象/Deployment/kubernetes-client-go-deployment.md","ref":"对象/Deployment/kubernetes-client-go-deployment.md","articles":[]},{"title":"策略","level":"1.10.1.3","depth":3,"path":"对象/Deployment/kubernetes-deployment-strategies.md","ref":"对象/Deployment/kubernetes-deployment-strategies.md","articles":[]},{"title":"原理","level":"1.10.1.4","depth":3,"path":"对象/Deployment/kubernetes-deployment-principle.md","ref":"对象/Deployment/kubernetes-deployment-principle.md","articles":[]}]},{"title":"DaemonSet","level":"1.10.2","depth":2,"path":"对象/Kubernetes-DaemonSet.md","ref":"对象/Kubernetes-DaemonSet.md","articles":[]},{"title":"Volumes","level":"1.10.3","depth":2,"path":"对象/kubernetes-PersistentVolume.md","ref":"对象/kubernetes-PersistentVolume.md","articles":[]},{"title":"StatefulSet","level":"1.10.4","depth":2,"path":"对象/Kubernetes-StatefulSet.md","ref":"对象/Kubernetes-StatefulSet.md","articles":[]},{"title":"Job","level":"1.10.5","depth":2,"path":"对象/Kubernetes-Job.md","ref":"对象/Kubernetes-Job.md","articles":[]},{"title":"Runtimeclass","level":"1.10.6","depth":2,"path":"对象/Runtimeclass/README.md","ref":"对象/Runtimeclass/README.md","articles":[{"title":"原理","level":"1.10.6.1","depth":3,"path":"对象/Runtimeclass/kubernetes-object-RuntimeClass-principle.md","ref":"对象/Runtimeclass/kubernetes-object-RuntimeClass-principle.md","articles":[]}]},{"title":"PodSecurityPolicy","level":"1.10.7","depth":2,"path":"对象/Kubernetes-PodSecurityPolicy.md","ref":"对象/Kubernetes-PodSecurityPolicy.md","articles":[]},{"title":"ConfigMap","level":"1.10.8","depth":2,"path":"对象/Kubernetes-ConfigMaps.md","ref":"对象/Kubernetes-ConfigMaps.md","articles":[]},{"title":"Pod","level":"1.10.9","depth":2,"path":"对象/Pod/README.md","ref":"对象/Pod/README.md","articles":[{"title":"Probes","level":"1.10.9.1","depth":3,"path":"对象/Pod/Kubernetes-Pod-Probes.md","ref":"对象/Pod/Kubernetes-Pod-Probes.md","articles":[]},{"title":"SecurityContext","level":"1.10.9.2","depth":3,"path":"对象/Pod/Kubernetes-Pod-SecurityContext.md","ref":"对象/Pod/Kubernetes-Pod-SecurityContext.md","articles":[]}]},{"title":"secret","level":"1.10.10","depth":2,"path":"对象/kubernetes-Secrets.md","ref":"对象/kubernetes-Secrets.md","articles":[]},{"title":"Ingress","level":"1.10.11","depth":2,"path":"对象/Kubernetes-Ingress.md","ref":"对象/Kubernetes-Ingress.md","articles":[]},{"title":"Service","level":"1.10.12","depth":2,"path":"对象/Kubernetes-Service.md","ref":"对象/Kubernetes-Service.md","articles":[]},{"title":"NetworkPolicy","level":"1.10.13","depth":2,"path":"对象/Kubernetes-NetworkPolicy.md","ref":"对象/Kubernetes-NetworkPolicy.md","articles":[]},{"title":"RBAC","level":"1.10.14","depth":2,"path":"对象/RBAC/README.md","ref":"对象/RBAC/README.md","articles":[{"title":"原理","level":"1.10.14.1","depth":3,"path":"对象/RBAC/kubernetes-RBAC-principle.md","ref":"对象/RBAC/kubernetes-RBAC-principle.md","articles":[]}]},{"title":"Auditing","level":"1.10.15","depth":2,"path":"对象/Auditing/README.md","ref":"对象/Auditing/README.md","articles":[{"title":"实战","level":"1.10.15.1","depth":3,"path":"对象/Auditing/kubernetes-Auditing-practice.md","ref":"对象/Auditing/kubernetes-Auditing-practice.md","articles":[]}]}]},"previous":{"title":"minikube","level":"1.9.1","depth":2,"path":"部署/kubernetes-minikube-deploy.md","ref":"部署/kubernetes-minikube-deploy.md","articles":[]},"dir":"ltr"},"config":{"plugins":["3-ba","accordion","advanced-emoji","anchor-navigation-ex","baidu-tongji","code","change_girls","custom-favicon","donate","expandable-chapters-small","edit-link","flexible-alerts","github-buttons","github","insert-logo","musicxml","prism","prism-themes","pageview-count","-highlight","-search","-lunr","rss","search-plus","splitter","-sharing","sharing-plus","sidebar-style","simple-mind-map","youtube","theme-default","tags","tbfed-pagefooter"],"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"sidebar-style":{"author":"宗勋","title":"《Kubernetes Docs》"},"tbfed-pagefooter":{"copyright":"Copyright &copy ghostwritten 浙ICP备2020032454号 2022","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"chapter-fold":{},"prism":{"css":["prism-themes/themes/prism-holi-theme.css"],"lang":{"shell":"bash"}},"youtube":{},"github":{"url":"https://github.com/Ghostwritten"},"baidu-tongji":{"url":"https://hm.baidu.com/hm.js","token":"55e7dfe47f4dc1c018d4042fdfa62565"},"splitter":{},"change_girls":{"time":10,"urls":["https://pic3.zhimg.com/v2-6c577f651fe7e2213fff03c5f4dfb31e_r.jpg","https://pic3.zhimg.com/v2-7709a47d063e542afdc756fbc51ea0ba_r.jpg","https://pic1.zhimg.com/v2-1a0b00ef73bfe88a55e263417641c4f4_r.jpg","https://pic3.zhimg.com/v2-ae52e6f527d832f299057d58c0a444d2_r.jpg","https://pic2.zhimg.com/v2-51a570e2117156d7bb4507ec9a652f1d_r.jpg","https://pic2.zhimg.com/v2-9a7fb904940b062e74034c4195107ea9_r.jpg","https://pic3.zhimg.com/v2-3fa14950c42f9ff71c640462521da902_r.jpg","https://pic3.zhimg.com/v2-150d6818db64ed647f4566613f0a26be_r.jpg","https://pic3.zhimg.com/v2-62c950e007ffaa22bf8dfaa40ee5c976_r.jpg","https://pic4.zhimg.com/v2-91a8c8f53d08282ef2ac1d7b9440928f_r.jpg"]},"accordion":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"code":{"copyButtons":true},"donate":{"alipay":"https://github.com/Ghostwritten/kubernetes-docs/blob/gh-pages/assets/imgs/aplipay.png?raw=true","alipayText":"支付宝打赏","button":"打赏","title":"","wechat":"https://github.com/Ghostwritten/kubernetes-docs/blob/gh-pages/assets/imgs/wechat.png?raw=true","wechatText":"微信打赏"},"fontsettings":{"theme":"white","family":"sans","size":2},"rss":{"categories":["kubernetes"],"title":"Kubernetes Docs","description":"This is the best book ever.","author":"宗勋","feed_url":"http://smoothies.com.cn/rss","site_url":"https://smoothies.com.cn/kubernetes-docs/","managingEditor":"writer@smoothies.com.cn (Zong Xun)","webMaster":"webmaster@smoothies.com.cn (Zong Xun)"},"musicxml":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":false},"favicon":"assets/imgs/kubernetes.ico","pageview-count":{},"prism-themes":{},"github-buttons":{"buttons":[{"user":"Ghostwritten","repo":"kubernetes-docs","type":"star","count":true,"size":"small"}]},"custom-favicon":{},"tags":{"placement":"top"},"3-ba":{"configuration":"auto","token":"9ffc0dce8d7079aceab6b0bc18eb626b"},"expandable-chapters-small":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":"Danger"},"note":{"className":"info","icon":"fa fa-info-circle","label":"Note"},"style":"callout","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":"Tip"},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":"Warning"}},"advanced-emoji":{"embedEmojis":false},"sharing":{"qq":false,"all":["facebook","google","twitter","weibo","instapaper"],"douban":false,"facebook":true,"weibo":false,"twitter":true,"pocket":false,"google":false,"qzone":false},"simple-mind-map":{"autoFit":true,"linkShape":"diagonal","preset":"default","style":{},"type":"markdown"},"edit-link":{"label":"Edit","base":"https://github.com/Ghostwritten/kubernetes-docs/edit/master/"},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"insert-logo":{"style":"background: none; max-height: 120px; min-height: 120px","url":"https://pic2.zhimg.com/v2-51a570e2117156d7bb4507ec9a652f1d_r.jpg"},"search-plus":{}},"theme":"default","author":"宗勋 - zongxun","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Kubernetes Docs","language":"zh-hans","links":{"sharing":{"all":null,"facebook":null,"google":null,"twitter":null,"weibo":null},"sidebar":{"Docker":"https://smoothies.com.cn/docker-docs/Overview.html","Blog":"https://smoothies.com.cn","Kubernetes":"https://smoothies.com.cn/kubernetes-docs/Overview.html","Go":"https://smoothies.com.cn/go-docs/Overview.html","Prometheus":"https://smoothies.com.cn/prometheus-docs/Overview.html","Command":"https://smoothies.com.cn/linux-command-docs/Overview.html","Shell":"https://smoothies.com.cn/shell-docs/Overview.html","Linux":"https://smoothies.com.cn/linux-docs/Overview.html","Gitbook":"https://smoothies.com.cn/gitbook-docs/Overview.html","Python":"https://smoothies.com.cn/python-docs/Overview.html","Exam":"https://ghostwritten.gitbook.io/kubernetes-exam-in-action/"}},"gitbook":"*","description":"这是一本关于 [Kubernetes](https://kubernetes.io/) 的书籍"},"file":{"path":"部署/kubernetes-manually-deploy.md","mtime":"2022-08-10T08:58:03.270Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-08-16T11:19:20.779Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-3-ba/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-accordion/accordionSelector.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-baidu-tongji/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-change_girls/girls.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-musicxml/osmd.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-musicxml/musicxml.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-musicxml/promise.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-rss/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sidebar-style/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-simple-mind-map/bundle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

